# ëª©ì°¨
ğŸ€ [íŒŒì¼ ì—…ë¡œë“œ](#íŒŒì¼-ì—…ë¡œë“œ)  
ğŸ€ [ì„œë¸”ë¦¿ íŒŒì¼ ì—…ë¡œë“œ](#ì„œë¸”ë¦¿-íŒŒì¼-ì—…ë¡œë“œ)  
ğŸ€ [ìŠ¤í”„ë§ íŒŒì¼ ì—…ë¡œë“œ](#ìŠ¤í”„ë§-íŒŒì¼-ì—…ë¡œë“œ)  
ğŸ€ [ì˜ˆì œ - íŒŒì¼ ì—…ë¡œë“œ ë° ë‹¤ìš´ë¡œë“œ](#ì˜ˆì œ---íŒŒì¼-ì—…ë¡œë“œ-ë°-ë‹¤ìš´ë¡œë“œ)  
ğŸ€ [ì •ë¦¬](#ì •ë¦¬)  

## íŒŒì¼ ì—…ë¡œë“œ
ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” HTML Fromì„ í†µí•œ íŒŒì¼ ì—…ë¡œë“œë¥¼ ì´í•´í•˜ë ¤ë©´
ë¨¼ì € **í¼ì„ ì „ì†¡í•˜ëŠ” ë‘ ê°€ì§€ ë°©ì‹ì˜ ì°¨ì´ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.**

### application/x-www-form-urlencoded
![application-x-www-form-urlencoded.png](imgs%2Fapplication-x-www-form-urlencoded.png)
`application/x-www-form-urlencoded` ë°©ì‹ì€ HTML From ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ì´ë‹¤.
Form íƒœê·¸ì— ë³„ë„ì˜ `enctype` ì˜µì…˜ì´ ì—†ìœ¼ë©´ ì›¹ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ HTTP ë©”ì‹œì§€ì˜ í—¤ë”ì— ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.
```text
Content-Type: application/x-www-form-urlencoded
```
ê·¸ë¦¬ê³  í¼ì— ì…ë ¥í•œ ì „ì†¡í•  í•­ëª©ì„ HTTP Bodyì— ë¬¸ìë¡œ `username=kim&age=20`ì™€ ê°™ì´ `&`ë¡œ êµ¬ë¶„í•´ì„œ ì „ì†¡í•œë‹¤.

íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ íŒŒì¼ì€ ë¬¸ìê°€ ì•„ë‹ˆë¼ ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ì „ì†¡í•´ì•¼ í•œë‹¤.
ë¬¸ìë¥¼ ì „ì†¡í•˜ëŠ” ì´ ë°©ì‹ìœ¼ë¡œ íŒŒì¼ì„ ì „ì†¡í•˜ê¸°ëŠ” ì–´ë µë‹¤.
ê·¸ë¦¬ê³  ë˜ í•œê°€ì§€ ë¬¸ì œê°€ ë” ìˆëŠ”ë°, ë³´í†µ í¼ì„ ì „ì†¡í•  ë•Œ íŒŒì¼ë§Œ ì „ì†¡í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ì ì´ë‹¤.

ë‹¤ìŒ ì˜ˆë¥¼ ë³´ì.
```text
- ì´ë¦„
- ë‚˜ì´
- ì²¨ë¶€íŒŒì¼
```

ì—¬ê¸°ì—ì„œ ì´ë¦„ê³¼ ë‚˜ì´ë„ ì „ì†¡í•´ì•¼ í•˜ê³ , ì²¨ë¶€íŒŒì¼ë„ í•¨ê»˜ ì „ì†¡í•´ì•¼ í•œë‹¤. ë¬¸ì œëŠ” ì´ë¦„ê³¼ ë‚˜ì´ëŠ” ë¬¸ìë¡œ ì „ì†¡í•˜ê³ , ì²¨ë¶€íŒŒì¼ì€ ë°”ì´ë„ˆë¦¬ë¡œ ì „ì†¡í•´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.
ì—¬ê¸°ì„œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. **ë¬¸ìì™€ ë°”ì´ë„ˆë¦¬ë¥¼ ë™ì‹œì— ì „ì†¡í•´ì•¼ í•˜ëŠ” ìƒí™©**ì´ë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ HTTPëŠ” `multipart/form-data`ë¼ëŠ” ì „ì†¡ ë°©ì‹ì„ ì œê³µí•œë‹¤.

### multipart/form-data
![multipart-form-data.png](imgs%2Fmultipart-form-data.png)
ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë ¤ë©´ Form íƒœê·¸ì— ë³„ë„ì˜ `enctype="multipart/form-data"`ë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤.
`multipart/form-data` ë°©ì‹ì€ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ì—¬ëŸ¬ íŒŒì¼ê³¼ í¼ì˜ ë‚´ìš© í•¨ê»˜ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. (ê·¸ë˜ì„œ ì´ë¦„ì´ `multipart`)

í¼ì˜ ì…ë ¥ ê²°ê³¼ë¡œ ìƒì„±ëœ HTTP ë©”ì‹œì§€ë¥¼ ë³´ë©´ ê°ê°ì˜ ì „ì†¡ í•­ëª©ì´ êµ¬ë¶„ë˜ì–´ ìˆë‹¤.
`Content-Disposition`ì´ë¼ëŠ” í•­ëª©ë³„ í—¤ë”ê°€ ì¶”ê°€ë˜ì–´ ìˆê³  ì—¬ê¸°ì— ë¶€ê°€ì •ë³´ê°€ ìˆë‹¤.
ì˜ˆì œì—ì„œëŠ” `username`, `age`, `file1`ì´ ê°ê° ë¶„ë¦¬ë˜ì–´ ìˆê³ , í¼ì˜ ì¼ë°˜ ë°ì´í„°ëŠ” ê° í•­ëª©ë³„ë¡œ ë¬¸ìê°€ ì „ì†¡ë˜ê³ , íŒŒì¼ì˜ ê²½ìš° íŒŒì¼ ì´ë¦„ê³¼
Content-Typeì´ ì¶”ê°€ë˜ê³  ë°”ì´ë„ˆë¦¬ ë°ì´í„°ê°€ ì „ì†¡ëœë‹¤.

`multipart/form-data`ëŠ” ì´ë ‡ê²Œ ê°ê°ì˜ í•­ëª©ì„ êµ¬ë¶„í•´ì„œ í•œë²ˆì— ì „ì†¡í•˜ëŠ” ê²ƒì´ë‹¤.

### Part
`multipart/form-data`ëŠ” `application/x-www-form-urlencoded`ì™€ ë¹„êµí•´ì„œ ë§¤ìš° ë³µì¡í•˜ê³  ê°ê°ì˜ ë¶€ë¶„(`Part`)ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤.
ê·¸ë ‡ë‹¤ë©´ ì´ë ‡ê²Œ ë³µì¡í•œ HTTP ë©”ì‹œì§€ë¥¼ ì„œë²„ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê¹Œ?

## ì„œë¸”ë¦¿ íŒŒì¼ ì—…ë¡œë“œ
### [ServletUploadControllerV1.java](..%2F..%2Fsrc%2Fmain%2Fjava%2Fhello%2Fitemservice%2Fweb%2Fcontroller%2Ffileupload%2FServletUploadControllerV1.java) ìƒì„±
```java
@Slf4j
@Controller
@RequestMapping("/file/servlet/v1")
public class ServletUploadControllerV1 {

    @GetMapping("/upload")
    public String newFile() {
        return "file/upload-form";
    }

    @PostMapping("/upload")
    public String saveFileV1(HttpServletRequest request) throws ServletException, IOException {
        log.info("request={}", request);

        String itemName = request.getParameter("itemName");
        log.info("itemName={}", itemName);

        Collection<Part> parts = request.getParts();
        log.info("parts={}", parts);

        return "file/upload-form";
    }
}
```

`request.getParts()`: `multipart/form-data` ì „ì†¡ ë°©ì‹ì—ì„œ ê°ê° ë‚˜ëˆ„ì–´ì§„ ë¶€ë¶„ì„ ë°›ì•„ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### [upload-form.html](..%2F..%2Fsrc%2Fmain%2Fresources%2Ftemplates%2Ffile%2Fupload-form.html) ìƒì„±
```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="utf-8">
    <title>ìƒí’ˆ ë“±ë¡ í¼</title>
</head>
<body>

<div class="container">

    <div class="py-5 text-center">
        <h2>ìƒí’ˆ ë“±ë¡ í¼</h2>
    </div>

    <h4 class="mb-3">ìƒí’ˆ ì…ë ¥</h4>

    <form th:action method="post" enctype="multipart/form-data">
        <ul>
            <li>ìƒí’ˆëª… <input type="text" name="itemName"></li>
            <li>íŒŒì¼<input type="file" name="file" ></li>
        </ul>
        <input type="submit"/>
    </form>

</div> <!-- /container -->
</body>
</html>
```

### [application.properties](..%2F..%2Fsrc%2Fmain%2Fresources%2Fapplication.properties) ì„¤ì • ì¶”ê°€
```properties
logging.level.org.apache.coyote.http11=debug
```
ì´ ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### ì‹¤í–‰
`http://localhost:8080/file/servlet/v1/upload`

ì‹¤í–‰í•´ë³´ë©´ `logging.level.org.apache.coyote.http11` ì˜µì…˜ì„ í†µí•œ ë¡œê·¸ì—ì„œ `multipart/form-data` ë°©ì‹ìœ¼ë¡œ ì „ì†¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
```text
Content-Type: multipart/form-data; boundary=----xxxx
  ------xxxx
  Content-Disposition: form-data; name="itemName"
  Spring
  ------xxxx
  Content-Disposition: form-data; name="file"; filename="test.data"
  Content-Type: application/octet-stream
  sdklajkljdf...

```

### ë©€í‹°íŒŒíŠ¸ ì‚¬ìš© ì˜µì…˜
#### ì—…ë¡œë“œ ì‚¬ì´ì¦ˆ ì œí•œ - [application.properties](..%2F..%2Fsrc%2Fmain%2Fresources%2Fapplication.properties) ì„¤ì • ì¶”ê°€
```properties
  spring.servlet.multipart.max-file-size=1MB
  spring.servlet.multipart.max-request-size=10MB
```
í° íŒŒì¼ì„ ë¬´ì œí•œ ì—…ë¡œë“œí•˜ê²Œ ë‘˜ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì—…ë¡œë“œ ì‚¬ì´ì¦ˆë¥¼ ì œí•œí•  ìˆ˜ ìˆë‹¤.

ì‚¬ì´ì¦ˆë¥¼ ë„˜ìœ¼ë©´ ì˜ˆì™¸(`SizeLimitExceededException`)ê°€ ë°œìƒí•œë‹¤.

- `max-file-size`: íŒŒì¼ í•˜ë‚˜ì˜ ìµœëŒ€ ì‚¬ì´ì¦ˆ, ê¸°ë³¸ 1MB
- `max-request-size`: ë©€í‹°íŒŒíŠ¸ ìš”ì²­ í•˜ë‚˜ì— ì—¬ëŸ¬ íŒŒì¼ì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆëŠ”ë°, ê·¸ ì „ì²´ì˜ í•©ì´ë‹¤. ê¸°ë³¸ 10MB

#### spring.servlet.multipart.enabled ë„ê¸° - [application.properties](..%2F..%2Fsrc%2Fmain%2Fresources%2Fapplication.properties) ì„¤ì • ì¶”ê°€
```properties
spring.servlet.multipart.enabled=false
```
##### ê²°ê³¼ ë¡œê·¸
```text
request=org.apache.catalina.connector.RequestFacade@xxx
itemName=null
parts=[]
```
ë©€í‹°íŒŒíŠ¸ëŠ” ì¼ë°˜ì ì¸ í¼ ìš”ì²­ì¸ `application/x-www-form-urlencoded`ë³´ë‹¤ í›¨ì”¬ ë³µì¡í•˜ë‹¤.
`spring.servlet.multipart.enabled` ì˜µì…˜ì„ ë„ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ë©€í‹°íŒŒíŠ¸ì™€ ê´€ë ¨ëœ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.
ê·¸ë˜ì„œ ê²°ê³¼ ë¡œê·¸ë¥¼ ë³´ë©´ `request.getParameter("itemName")`, `request.getParts()`ì˜ ê²°ê³¼ê°€ ë¹„ì–´ìˆë‹¤.

#### spring.servlet.multipart.enabled ì¼œê¸° - [application.properties](..%2F..%2Fsrc%2Fmain%2Fresources%2Fapplication.properties) ì„¤ì • ë³€ê²½
```properties
spring.servlet.multipart.enabled=true
```
ì´ ì˜µì…˜ì„ ì¼œë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ê²Œ ë©€í‹°íŒŒíŠ¸ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë¼ê³  ì„¤ì •í•œë‹¤. ì°¸ê³ ë¡œ ê¸°ë³¸ ê°’ì€ `true`ì´ë‹¤.
##### ê²°ê³¼ ë¡œê·¸
```text
request=org.springframework.web.multipart.support.StandardMultipartHttpServletRequest
itemName=Spring
parts=[ApplicationPart1,ApplicationPart2]
```

`request.getParameter("itemName")`ì˜ ê²°ê³¼ë„ ì˜ ì¶œë ¥ë˜ê³ , `request.getParts()`ì—ë„ ìš”ì²­í•œ ë‘ ê°€ì§€ ë©€í‹°íŒŒíŠ¸ì˜ ë¶€ë¶„
ë°ì´í„°ê°€ í¬í•¨ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ì´ ì˜µì…˜ì„ ì¼œë©´ ë³µì¡í•œ ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì œê³µí•œë‹¤.

ë¡œê·¸ë¥¼ ë³´ë©´ `HttpServletRequest` ê°ì²´ê°€ `RequestFacade` â¡ï¸ `StandardMultipartHttpServletRequest`ë¡œ ë³€í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

> ğŸ€ `spring.servlet.multipart.enabled`ì˜µì…˜ì„ ì¼œë©´ ìŠ¤í”„ë§ì˜ `DispatcherServlet`ì—ì„œ ë©€í‹°íŒŒíŠ¸ ë¦¬ì¡¸ë²„(`MultipartResolver`)ë¥¼ ì‹¤í–‰í•œë‹¤.
> ë©€í‹°íŒŒíŠ¸ ë¦¬ì¡¸ë²„ëŠ” ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì¸ ê²½ìš° ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì „ë‹¬í•˜ëŠ” ì¼ë°˜ì ì¸ `HttpServletRequest`ë¥¼ `MultipartHttpServletRequest`ë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜í•œë‹¤.  
> `MultipartHttpServletRequest`ëŠ” `HttpSerlvetRequest`ì˜ ìì‹ ì¸í„°í˜ì´ìŠ¤ì´ê³ , ë©€í‹°íŒŒíŠ¸ì™€ ê´€ë ¨ëœ ì¶”ê°€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
> 
> ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë©€í‹°íŒŒíŠ¸ ë¦¬ì¡¸ë²„ëŠ” `MultipartHttpServletRequest` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ `StandardMultipartHttpServletRequest`ë¥¼ ë°˜í™˜í•œë‹¤.  
> ì´ì œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ `HttpServletRequest` ëŒ€ì‹ ì— `MultipartHttpServletRequest`ë¥¼ ì£¼ì…ë°›ì„ ìˆ˜ ìˆëŠ”ë°, ì´ê²ƒì„ ì‚¬ìš©í•˜ë©´
> ë©€í‹°íŒŒíŠ¸ì™€ ê´€ë ¨ëœ ì—¬ëŸ¬ê°€ì§€ ì²˜ë¦¬ë¥¼ í¸ë¦¬í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë° ì´í›„ì— ì„¤ëª…í•  `MultipartFile`ì´ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” í¸í•˜ê¸° ë•Œë¬¸ì—
> `MultipartHttpServletRequest`ë¥¼ ì˜ ì‚¬ìš©í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

ì„œë¸”ë¦¿ì´ ì œê³µí•˜ëŠ” `Part`ì— ëŒ€í•´ ì•Œì•„ë³´ê³  ì‹¤ì œ íŒŒì¼ë„ ì„œë²„ì— ì—…ë¡œë“œ í•´ë³´ì.
ë¨¼ì € íŒŒì¼ ì—…ë¡œë“œë¥¼ í•˜ë ¤ë©´ ì‹¤ì œ íŒŒì¼ì´ ì €ì¥ë˜ëŠ” ê²½ë¡œê°€ í•„ìš”í•˜ë‹¤.

í•´ë‹¹ ê²½ë¡œì— ì‹¤ì œ í´ë”ë¥¼ ë§Œë“¤ì–´ë‘ì. ê·¸ë¦¬ê³  ë‹¤ìŒì— ë§Œë“¤ì–´ì§„ ê²½ë¡œë¥¼ ì…ë ¥í•´ë‘ì.
### ì €ì¥ ê²½ë¡œ ì„¤ì •í•˜ê¸° - 
```properties
file.dir=/Users/..../
```

> ğŸš¨ ì£¼ì˜  
> 1. ê¼­ í•´ë‹¹ ê²½ë¡œì— ì‹¤ì œ í´ë”ë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ê¸°.
> 2. `application.properties`ì—ì„œ ì„¤ì •í•  ë•Œ ë§ˆì§€ë§‰ì— `/`ê°€ í¬í•¨ë˜ì–´ì•¼ í•œë‹¤.

### [ServletUploadControllerV2.java](..%2F..%2Fsrc%2Fmain%2Fjava%2Fhello%2Fitemservice%2Fweb%2Fcontroller%2Ffileupload%2FServletUploadControllerV2.java) ìƒì„±
```java
@Slf4j
@Controller
@RequestMapping("/file/servlet/v2")
public class ServletUploadControllerV2 {

    @Value("${file.dir}")
    private String filedir;
    
    @GetMapping("/upload")
    public String newFile() {
        return "file/upload-form";
    }

    @PostMapping("/upload")
    public String saveFileV1(HttpServletRequest request) throws ServletException, IOException {
        log.info("request={}", request);

        String itemName = request.getParameter("itemName");
        log.info("itemName={}", itemName);

        Collection<Part> parts = request.getParts();
        log.info("parts={}", parts);

        for (Part part : parts) {
            log.info("==== PART ====");
            log.info("name={}", part.getName());
            Collection<String> headerNames = part.getHeaderNames();

            for (String headerName : headerNames) {
                log.info("header {}: {}", headerName, part.getHeader(headerName));
            }
            
            // í¸ì˜ ë©”ì„œë“œ
            // content-disposition; filename
            log.info("submittedFileName={}", part.getSubmittedFileName());
            log.info("size={}", part.getSize()); // part body size
            
            // ë°ì´í„° ì½ê¸°
            InputStream inputStream = part.getInputStream();
            String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);
            log.info("body={}", body);
            
            // íŒŒì¼ì— ì €ì¥í•˜ê¸°
            if (StringUtils.hasText(part.getSubmittedFileName())) {
                String fullPath = filedir + part.getSubmittedFileName();
                log.info("íŒŒì¼ ì €ì¥ fullPath={}", fullPath);
                part.write(fullPath);
            }
        }

        return "file/upload-form";
    }
}
```

```java
@Value("${file.dir")
private String fileDir;
```
`application/properties`ì—ì„œ ì„¤ì •í•œ `file.dir`ì˜ ê°’ì„ ì£¼ì…í•œë‹¤.  
ë©€í‹°íŒŒí‹° í˜•ì‹ì€ ì „ì†¡ ë°ì´í„°ë¥¼ í•˜ë‚˜í•œ ê°ê° ë¶€ë¶„(`Part`)ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì „ì†¡í•œë‹¤.
`parts`ì—ëŠ” ì´ë ‡ê²Œ ë‚˜ëˆ„ì–´ì§„ ë°ì´í„°ê°€ ê°ê° ë‹´ê¸´ë‹¤.  
ì„œë¸”ë¦¿ì´ ì œê³µí•˜ëŠ” `Part`ëŠ” ë©€í‹°íŒŒíŠ¸ í˜•ì‹ì„ í´ë‹ˆë¼í—¥ ì½ì„ ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.

### Part ì£¼ìš” ë©”ì„œë“œ
- `part.getSubmittedFileName()`: í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹¬í•  íŒŒì¼ëª…
- `part.getInputStream()`: Partì˜ ì „ì†¡ ë°ì´í„°ë¥¼ ì½ëŠ”ë‹¤.
- `part.write(...)`: Partë¥¼ í†µí•´ ì „ì†¡ëœ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.
### ì‹¤í–‰
`http://localhost:8080/file/servlet/v2/upload` ì‹¤í–‰ í›„
- `itemName`: `ìƒí’ˆA`
- `file`: `ìŠ¤í¬ë¦°ìƒ·.png`

ì „ì†¡ ì‹œ ì•„ë˜ ë¡œê·¸ê°€ ì¶œë ¥ëœë‹¤.
```text

==== PART ====
name=itemName
header content-disposition: form-data; name="itemName" submittedFileName=null
size=7
body=ìƒí’ˆA
==== PART ====
name=file
header content-disposition: form-data; name="file"; filename="ìŠ¤í¬ë¦°ìƒ·.png" header content-type: image/png
submittedFileName=ìŠ¤í¬ë¦°ìƒ·.png
size=112384
body=qwlkjek2ljlese...
íŒŒì¼ ì €ì¥ fullPath=/Users/..../ìŠ¤í¬ë¦°ìƒ·.png
```
íŒŒì¼ ì €ì¥ ê²½ë¡œì— ê°€ë³´ë©´ ì‹¤ì œ íŒŒì¼ì´ ì €ì¥ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ì €ì¥ì´ ë˜ì§€ ì•Šì•˜ë‹¤ë©´ íŒŒì¼ ì €ì¥ ê²½ë¡œë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ì.

> ğŸ€ í° ìš©ëŸ‰ì˜ íŒŒì¼ì„ ì—…ë¡œë“œ í•  ë•ŒëŠ” ë¡œê·¸ê°€ ë„ˆë¬´ ë§ì•„ì„œ ë‹¤ìŒ ì˜µì…˜ì„ ë„ëŠ” ê²ƒì´ ì¢‹ë‹¤.   
> `logging.level.org.apache.coyote.http11=debug`   
> ë‹¤ìŒ ë¶€ë¶„ë„ íŒŒì¼ì˜ ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ëª¨ë‘ ì¶œë ¥í•˜ë¯€ë¡œ ë„ëŠ” ê²ƒì´ ì¢‹ë‹¤.   
> `log.info("body={}", body);`

ì„œë¸”ë¦¿ì´ ì œê³µí•˜ëŠ” `Part`ëŠ” í¸í•˜ê¸°ëŠ” í•˜ì§€ë§Œ, `HttpServletRequest`ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ê³ , ì¶”ê°€ë¡œ íŒŒì¼ ë¶€ë¶„ë§Œ êµ¬ë¶„í•˜ë ¤ë©´
ì—¬ëŸ¬ê°€ì§€ ì½”ë“œë¥¼ ë„£ì–´ì•¼ í•œë‹¤.

## ìŠ¤í”„ë§ íŒŒì¼ ì—…ë¡œë“œ
ìŠ¤í”„ë§ì€ `MultipartFile`ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ë©€í‹°íŒŒíŠ¸ íŒŒì¼ì„ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì§€ì›í•œë‹¤.
### [SpringUploadController.java](..%2F..%2Fsrc%2Fmain%2Fjava%2Fhello%2Fitemservice%2Fweb%2Fcontroller%2Ffileupload%2FSpringUploadController.java)
```java
@Slf4j
@Controller
@RequestMapping("/file/spring")
public class SpringUploadController {

    @Value("${file.dir}")
    private String fileDir;

    @GetMapping("/upload")
    public String newFile() {
        return "file/upload-form";
    }

    @PostMapping("/upload")
    public String saveFile(@RequestParam String itemName,
                           @RequestParam MultipartFile file,
                           HttpServletRequest request) throws IOException {
        log.info("request={}", request);
        log.info("itemName={}", itemName);
        log.info("multipartFile={}", file);

        if (!file.isEmpty()) {
            String fullPath = fileDir + file.getOriginalFilename();
            log.info("íŒŒì¼ ì €ì¥ fullPath={}", fullPath);
            file.transferTo(new File(fullPath));
        }

        return "file/upload-form";
    }
}
```
ì½”ë“œë¥¼ ë³´ë©´ ìŠ¤í”„ë§ ë‹µê²Œ ë”± í•„ìš”í•œ ë¶€ë¶„ì˜ ì½”ë“œë§Œ ì‘ì„±í•˜ë©´ ëœë‹¤.

`@RequestParam MutipartFile file` ì—…ë¡œë“œí•˜ëŠ” HTML Formì˜ nameì— ë§ì¶”ì–´ `@RequestParam`ì„ ì ìš©í•˜ë©´ ëœë‹¤.
ì¶”ê°€ë¡œ `@ModelAttribute`ì—ì„œë„ `MultipartFile`ì„ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### MultipartFile ì£¼ìš” ë©”ì„œë“œ
- `file.getOriginalFilename()`: ì—…ë¡œë“œ íŒŒì¼ëª…
- `file.transferTo(...)`: íŒŒì¼ ì €ì¥
### ì‹¤í–‰
`http://localhost:8080/file/spring/upload` ì§„ì…í•˜ì—¬ ì •ë³´ ì…ë ¥ í›„ ì „ì†¡ ì‹œ ì•„ë˜ ë¡œê·¸ê°€ ì¶œë ¥ëœë‹¤.
```text
request=org.springframework.web.multipart.support.StandardMultipartHttpServletR equest@5c022dc6
itemName=ìƒí’ˆA 
multipartFile=org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@274ba730
íŒŒì¼ ì €ì¥ fullPath=/Users/.../ìŠ¤í¬ë¦°ìƒ·.png
```
## ì˜ˆì œ - íŒŒì¼ ì—…ë¡œë“œ ë° ë‹¤ìš´ë¡œë“œ
## ì •ë¦¬