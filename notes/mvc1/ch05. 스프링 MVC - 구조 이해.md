## ìŠ¤í”„ë§ MVC êµ¬ì¡° ì´í•´
### ì§ì ‘ ë§Œë“  MVC í”„ë ˆì„ì›Œí¬ êµ¬ì¡°
![ì§ì ‘ ë§Œë“  MVC.png](imgs%2F%EC%A7%81%EC%A0%91%20%EB%A7%8C%EB%93%A0%20MVC.png)

### ìŠ¤í”„ë§ MVC êµ¬ì¡°
![ìŠ¤í”„ë§ MVC êµ¬ì¡°.png](imgs%2F%EC%8A%A4%ED%94%84%EB%A7%81%20MVC%20%EA%B5%AC%EC%A1%B0.png)

### ì§ì ‘ ë§Œë“  MVC í”„ë ˆì„ì›Œí¬ vs ìŠ¤í”„ë§ MVC
- FrontController    = DispatcherServlet
- handlerMappingMap  = HandlerMapping
- MyHandlerAdapter   = HandlerAdapter
- ModelView          = ModelAndView
- viewResolver       = ViewResolver
- MyView             = View

### DispatcherServlet êµ¬ì¡° ì‚´í´ë³´ê¸°
`org.springframework.web.servlet.DispatcherServlet`  
ìŠ¤í”„ë§ MVC ë„ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤. 
ìŠ¤í”„ë§ MVC ì˜ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°”ë¡œ **ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿(DispatcherServlet)**ì´ë‹¤.
ê·¸ë¦¬ê³  ì´ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ìŠ¤í”„ë§ MVC ì˜ í•µì‹¬ì´ë‹¤.

### DispatcherServlet ì„œë¸”ë¦¿ ë“±ë¡
- `DispatcherServlet`ë„ ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ `HttpServlet`ì„ ìƒì† ë°›ì•„ì„œ ì‚¬ìš©í•˜ê³ , ì„œë¸”ë¦¿ìœ¼ë¡œ ë™ì‘í•œë‹¤.
  - `DispatcherServlet` -> `FrameworkServlet` -> `HttpServletBean` -> `HttpServlet`
- ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” `DispatcherServlet`ì„ ì„œë¸”ë¦¿ìœ¼ë¡œ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ì„œ ëª¨ë“  ê²½ë¡œ(`urlPatterns="/"`)ì— ëŒ€í•´ì„œ ë§¤í•‘í•œë‹¤.
  - ğŸ€  ë” ìì„¸í•œ ê²½ìš°ê°€ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤. ê·¸ë˜ì„œ ê¸°ì¡´ì— ë“±ë¡í•œ ì„œë¸”ë¦¿ë„ í•¨ê»˜ ë™ì‘í•œë‹¤.

### ìš”ì²­ íë¦„
- ì„œë¸”ë¦¿ì´ í˜¸ì¶œë˜ë©´ `HttpServlet`ì´ ì œê³µí•˜ëŠ” `service()`ê°€ í˜¸ì¶œëœë‹¤.
- ìŠ¤í”„ë§ MVC ëŠ” `dispatcherServlet`ì˜ ë¶€ëª¨ì¸ `FrameworkServlet`ì—ì„œ `service()`ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•´ë‘ì—ˆë‹¤.
- `FrameworkServlet.service()`ë¥¼ ì‹œì‘ìœ¼ë¡œ ì—¬ëŸ¬ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ì„œ `DispatcherServlet.doDispatch()`ê°€ í˜¸ì¶œëœë‹¤.

### `DispatcherServlet.doDispatch()`
```java
protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {
    
    HttpServletRequest processedRequest = request;
    HandlerExecutionChain mappedHandler = null;
    ModelAndView mv = null;
    
    // 1. í•¸ë“¤ëŸ¬ ì¡°íšŒ
    mappedHandler = getHandler(processedRequest);
    if (mappedHandler == null) {
		noHandlerFound(processedRequest, response);
        return;
    }
    
    // 2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ - í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„°
    HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());
    
    // 3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰ -> 4. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ í•¸ë“¤ëŸ¬ ì‹¤í–‰ -> 5. ModelAndView ë°˜í™˜
    mv = ha.handle(processedRequest, response, mappedHandler.getHandler());
    
    processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);
}

private void processDispatchResult(HttpServletRequest request, HttpServletResponse response, 
                                   HandlerExecutionChain mappedHandler, ModelAndView mv, Exception exception) throws Exception {
    
    // ë·° ë Œë”ë§ í˜¸ì¶œ
    render(mv, request, response);
}

protected void render(ModelAndView mv, HttpServletRequest request, HttpServletResponse response) throws Exception {
    
    View view;
    String viewName = mv.getViewName();
    
    // 6. ë·° ë¦¬ì¡¸ë²„ë¥¼ í†µí•´ì„œ ë·° ì°¾ê¸°, 7. View ë°˜í™˜
    view = resolveViewName(viewName, mv.getModelInternal(), locale, request);
    
    // 8. ë·° ë Œë”ë§
    view.render(mv.getModelInternal(), request, response);
}
```

### ìŠ¤í”„ë§ MVC êµ¬ì¡°
![ìŠ¤í”„ë§ MVC êµ¬ì¡°.png](imgs%2F%EC%8A%A4%ED%94%84%EB%A7%81%20MVC%20%EA%B5%AC%EC%A1%B0.png)
#### ë™ì‘ ìˆœì„œ
1. **í•¸ë“¤ëŸ¬ ì¡°íšŒ**: í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ ìš”ì²­ URLì— ë§¤í•‘ëœ í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬)ë¥¼ ì¡°íšŒí•œë‹¤.
2. **í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ**: í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì¡°íšŒí•œë‹¤.
3. **í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰**: í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì‹¤í–‰í•œë‹¤.
4. **í•¸ë“¤ëŸ¬ ì‹¤í–‰**: í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ ì‹¤ì œ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•œë‹¤.
5. **ModelAndView ë°˜í™˜**: í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” í•¸ë“¤ëŸ¬ê°€ ë°˜í™˜í•˜ëŠ” ì •ë³´ë¥¼ `ModelAndView`ë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜í•œë‹¤.
6. **viewResolver í˜¸ì¶œ**: ë·° ë¦¬ì¡¸ë²„ë¥¼ ì°¾ê³  ì‹¤í–‰í•œë‹¤. (JSP ì˜ ê²½ìš° `InternalResourceViewResolver`ê°€ ìë™ ë“±ë¡ë˜ê³  ì‚¬ìš©ëœë‹¤.)
7. **View ë°˜í™˜**: ë·° ë¦¬ì¡¸ë²„ëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë¬¼ë¦¬ ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•˜ê³  ë Œë”ë§ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” ë·° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
   (JSP ì˜ ê²½ìš° `InternalResourceView(JstlView)ë¥¼ ë°˜í™˜í•˜ëŠ”ë°, ë‚´ë¶€ì— `forward()` ë¡œì§ì´ ìˆë‹¤.)
8. ** ë·° ë Œë”ë§**: ë·°ë¥¼ í†µí•´ì„œ ë·°ë¥¼ ë Œë”ë§í•œë‹¤.
#### ì¸í„°í˜ì´ìŠ¤ ì‚´í´ë³´ê¸°
- ìŠ¤í”„ë§ MVCì˜ í° ê°•ì ì€ `DispatcherServlet`ì½”ë“œì˜ ë³€ê²½ ì—†ì´, ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ë³€ê²½í•˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.
ì§€ê¸ˆê¹Œì§€ ì„¤ëª…í•œ ëŒ€ë¶€ë¶„ì„ í™•ì¥ ê°€ëŠ¥í•  ìˆ˜ ìˆê²Œ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•œë‹¤.
- ì´ ì¸í„°í˜ì´ìŠ¤ë“¤ë§Œ êµ¬í˜„í•´ì„œ `dispatcherServlet`ì— ë“±ë¡í•˜ë©´ ë‚˜ë§Œì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.
#### ì£¼ìš” ì¸í„°í˜ì´ìŠ¤ ëª©ë¡
- í•¸ë“¤ëŸ¬ ë§¤í•‘: `org.springframework.web.servlet.HandlerMapping`
- í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°: `org.springframework.web.servlet.HandlerAdapter`
- ë·° ë¦¬ì¡¸ë²„: `org.springframework.web.servlet.ViewResolver`
- ë·°: `org.springframework.web.servlet.View`

### ì •ë¦¬
ìŠ¤í”„ë§ MVC ëŠ” ì½”ë“œ ë¶„ëŸ‰ë„ ë§¤ìš° ë§ê³ , ë³µì¡í•´ì„œ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë‹¤ íŒŒì•…í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šë‹¤.
ì‚¬ì‹¤ í•´ë‹¹ ê¸°ëŠ¥ì„ ì§ì ‘ í™•ì¥í•˜ê±°ë‚˜ ë‚˜ë§Œì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“œëŠ” ì¼ì€ ì—†ìœ¼ë¯€ë¡œ ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
ìŠ¤í”„ë§ MVC ëŠ” ì „ì„¸ê³„ ìˆ˜ ë§ì€ ê°œë°œìë“¤ì˜ ìš”êµ¬ì‚¬í•­ì— ë§ì¶”ì–´ ê¸°ëŠ¥ì„ ê³„ì† í™•ì¥í•´ì™”ê³ , ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ë•Œ í•„ìš”ë¡œ í•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì´
ì´ë¯¸ ë‹¤ êµ¬í˜„ë˜ì–´ ìˆë‹¤.
ê·¸ë˜ë„ ì´ë ‡ê²Œ í•µì‹¬ ë™ì‘ ë°©ì‹ì„ ì•Œì•„ë‘ì–´ì•¼ í–¥í›„ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ì–´ë–¤ ë¶€ë¶„ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ì§€ ì‰½ê²Œ íŒŒì•…í•˜ê³ , ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
ê·¸ë¦¬ê³  í™•ì¥ í¬ì¸íŠ¸ê°€ í•„ìš”í•  ë•Œ, ì–´ë–¤ ë¶€ë¶„ì„ í™•ì¥í•´ì•¼ í• ì§€ ê°ì„ ì¡ì„ ìˆ˜ ìˆë‹¤.

## í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°
### Controller ì¸í„°í˜ì´ìŠ¤
#### ê³¼ê±°ì˜ ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬
`org.springframework.web.servlet.mvc.Controller`
```java
public interface Controller {
    ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception;
}
```
> ğŸ€ `Controller` ì¸í„°í˜ì´ìŠ¤ëŠ” `@Controller`ì™€ ë‹¤ë¥´ë‹¤.

##### OldController.java
```java
@Component("/springmvc/old-controller")
public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
    System.out.println("OldController.handleRequest");
    return null;
}
```
ì´ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œë˜ë ¤ë©´ ë‹¤ìŒ 2ê°€ì§€ê°€ í•„ìš”í•˜ë‹¤.
- **HandlerMapping(í•¸ë“¤ëŸ¬ ë§¤í•‘)**
  - í•¸ë“¤ëŸ¬ ë§¤í•‘ì—ì„œ ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
  - ì˜ˆ) ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ì´ í•„ìš”í•˜ë‹¤.
- **HandlerAdapter(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°)**
  - í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ì„œ ì°¾ì€ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•„ìš”í•˜ë‹¤.
  - ì˜ˆ) Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ê³  ì‹¤í–‰í•´ì•¼ í•œë‹¤.

ìŠ¤í”„ë§ì€ ì´ë¯¸ í•„ìš”í•œ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ëŒ€ë¶€ë¶„ êµ¬í˜„í•´ë‘ì—ˆë‹¤.
ê°œë°œìê°€ ì§ì ‘ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ë§Œë“œëŠ” ì¼ì€ ê±°ì˜ ì—†ë‹¤.

#### ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° (ì‹¤ì œë¡œëŠ” ë” ë§ì§€ë§Œ, ì¤‘ìš”í•œ ë¶€ë¶„ë§Œ ì„¤ëª…)
##### HandlerMapping
```text
0 = RequestMappingHandlerMapping: ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMapping ì—ì„œ ì‚¬ìš©
1 = BeanNameURlHandlerMapping: ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.
```

##### HandlerAdapter
```text
0 = RequestMappingHandlerAdapter: ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMapping ì—ì„œ ì‚¬ìš©
1 = HttpRequestHandlerAdapter: HttpRequestHandler ì²˜ë¦¬
2 = SimpleControllerHandlerAdapter: Controller ì¸í„°í˜ì´ìŠ¤(ì• ë…¸í…Œì´ì…˜ì´ ì•„ë‹Œ ê³¼ê±°ì— ì‚¬ìš©í–ˆë˜ ê²ƒ) ì²˜ë¦¬
```

í•¸ë“¤ëŸ¬ ë§¤í•‘ë„, í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë„ ëª¨ë‘ ìˆœì„œëŒ€ë¡œ ì°¾ê³ , ë§Œì•½ì— ì—†ìœ¼ë©´ ë‹¤ìŒ ìˆœì„œë¡œ ë„˜ì–´ê°„ë‹¤.

1. í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ
   - `HandlerMapping` ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.
   - ì´ ê²½ìš° ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì£¼ëŠ” `BeanNameUrlHandlerMapping` ì´ ì‹¤í–‰ì— ì„±ê³µí•˜ê³  í•¸ë“¤ëŸ¬ì¸ `OldController` ë¥¼ ë°˜í™˜í•œë‹¤.
2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ
   - `HandlerAdapter` ì˜ `supports()`ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤.
   - `SimpleControllerHandlerAdapter` ê°€ Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ëœë‹¤.
3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰
   - ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ì¡°íšŒí•œ `SimpleControllerHandlerAdapter` ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤€ë‹¤.
   - `SimpleControllerHandlerAdapter`ëŠ” í•¸ë“¤ëŸ¬ì¸ `OldController`ë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

##### ì •ë¦¬
OldController í•¸ë“¤ëŸ¬ ë§¤í•‘, ì–´ëŒ‘í„° `OldController`ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ì‚¬ìš©ëœ ê°ì²´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.  
`HandlerMapping = BeanNameUrlHandlerMapping`  
`HandlerAdapter = SimpleControllerHandlerAdapter`

### HttpRequestHandler
ì„œë¸”ë¦¿ê³¼ ê°€ì¥ ìœ ì‚¬í•œ í˜•íƒœì˜ í•¸ë“¤ëŸ¬
#### HttpRequestHandler
```java
public interface HttpRequestHandler {
    void handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException;
}
```
#### MyHttpRequestHandler
```java
@Component("/springmvc/request-handler")
public class MyHttpRequestHandler implements HttpRequestHandler {
    
    @Override
    public void handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	    System.out.println("MyHttpRequestHandler.handleRequest");
    }
}
```
1. í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ
   - `HandlerMapping` ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.
   - ì´ ê²½ìš° ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¦„ ê·¸ëŒ€ë¡œ ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì£¼ëŠ” `BeanNameUrlHandlerMapping`ê°€ ì‹¤í–‰ì— ì„±ê³µí•˜ê³  í•¸ë“¤ëŸ¬ì¸ `MyHttpRequestHandler`ë¥¼ ë°˜í™˜í•œë‹¤.
2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ
   - `HandlerAdapter`ì˜ `supports()`ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤.
   - `HttpRequestHandlerAdapter`ê°€ `HttpRequestHandler` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ëœë‹¤.
3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰
   - ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ì¡°íšŒí•œ `HttpRequestHandlerAdapter`ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤€ë‹¤.
   - `HttpRequestHandlerAdatper`ëŠ” í•¸ë“¤ëŸ¬ì¸ `MyHttpRequestHandler`ë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

##### ì •ë¦¬
`MyHttpRequestHandler` í•¸ë“¤ëŸ¬ ë§¤í•‘, ì–´ëŒ‘í„° `MyHttpRequestHandler`ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ì‚¬ìš©ëœ ê°ì²´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.  
`HandlerMapping = BeanNameUrlHandlerMapping`  
`HandlerAdatper = HttpRequestHandlerAdapter`  

### `@RequestMapping`
ì¡°ê¸ˆ ë’¤ì—ì„œ ìì„¸íˆ ì„¤ëª…í•˜ê² ì§€ë§Œ, ê°€ì¥ ìš°ì„  ìˆœìœ„ê°€ ë†’ì€ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” `RequestMappingHandlerMapping`, 
`RequestMappingHandlerAdatper`ì´ë‹¤. `@RequestMapping`ì˜ ì•ê¸€ìë¥¼ ë”°ì„œ ë§Œë“  ì´ë¦„ì¸ë°, ì´ê²ƒì´ ë°”ë¡œ ì§€ê¸ˆ ìŠ¤í”„ë§ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ”
ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§€ì›í•˜ëŠ” ë§¤í•‘ê³¼ ì–´ëŒ‘í„°ì´ë‹¤. ì‹¤ë¬´ì—ì„œëŠ” 99.9% ì´ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•œë‹¤.

## ë·° ë¦¬ì¡¸ë²„
### OldController - View ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ë³€ê²½
```java
@Component("/springmvc/old-controller")
public class OldController implements Controller {
    
    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        System.out.println("OldController.handleRequest");
        return new ModelAndView("new-form"); // View ë°˜í™˜
    }
}
```

### `application.properties` ìˆ˜ì •
```properties
spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp
```

### ë·° ë¦¬ì¡¸ë²„ - InternalResourceViewResolver ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” `InternalResourceViewResolver`ë¼ëŠ” ë·° ë¦¬ì¡¸ë²„ë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ”ë°,
ì´ë•Œ `application.properties`ì— ë“±ë¡í•œ `spring.mvc.view.prefix`, `spring.mvc.view.suffix` ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ë“±ë¡í•œë‹¤.

> ğŸ€  `Thymeleaf`ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ê²½ìš° ìœ„ì˜ ì½”ë“œëŠ” ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

### ë·° ë¦¬ì¡¸ë²„ ë™ì‘ ë°©ì‹
#### ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” ë·° ë¦¬ì¡¸ë²„ (ì‹¤ì œë¡œëŠ” ë” ë§ë‹¤.)
```text
1 = BeanNameViewResolver: ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë·°ë¥¼ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤. (ì˜ˆ: ì—‘ì…€ íŒŒì¼ ìƒì„± ê¸°ëŠ¥ì— ì‚¬ìš©)
2 = InternalResourceViewResolver: JSP ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë·°ë¥¼ ë°˜í™˜í•œë‹¤.
```
1. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° í˜¸ì¶œ
   - í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ `new-form`ì´ë¼ëŠ” ë…¼ë¦¬ ë·° ì´ë¦„ì„ íšë“í•œë‹¤.
2. ViewResolver í˜¸ì¶œ
   - `new-form` ì´ë¼ëŠ” ë·° ì´ë¦„ìœ¼ë¡œ `viewResolver`ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤.
   - `BeanNameViewResolver`ëŠ” `new-form`ì´ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ë·°ë¥¼ ì°¾ì•„ì•¼ í•˜ëŠ”ë° ì—†ë‹¤.
   - `InternalResourceViewResolver`ê°€ í˜¸ì¶œëœë‹¤.
3. InternalResourceViewResolver
   - ì´ ë·° ë¦¬ì¡¸ë²„ëŠ” `InternalResourceView`ë¥¼ í˜¸ì¶œí•œë‹¤.
4. ë·° - InternalResourceView
   - `InternalResourceView`ëŠ” JSP ì²˜ëŸ¼ `forward()`ë¥¼ í˜¸ì¶œí•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.
5. view.render()
   - `view.render()`ê°€ í˜¸ì¶œë˜ê³  `InternalResourceView`ëŠ” `forward()`ë¥¼ ì‚¬ìš©í•´ì„œ JSP ë¥¼ ì‹¤í–‰í•œë‹¤.

> ğŸ€ ì°¸ê³ 
> - `InternalResourceviewResolver`ëŠ” ë§Œì•½ JSTL ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆìœ¼ë©´ `InternalResourceView`ë¥¼ ìƒì†ë°›ì€ `JstlView`ë¥¼ ë°˜í™˜í•œë‹¤.
> JstlViewëŠ” JSTL íƒœê·¸ ì‚¬ìš© ì‹œ ì•½ê°„ì˜ ë¶€ê°€ ê¸°ëŠ¥ì´ ì¶”ê°€ëœë‹¤.  
> - ë‹¤ë¥¸ ë·°ëŠ” ì‹¤ì œ ë·°ë¥¼ ë Œë”ë§í•˜ì§€ë§Œ, JSP ì˜ ê²½ìš° `forward()`ë¥¼ í†µí•´ì„œ í•´ë‹¹ JSP ë¡œ ì´ë™í•´ì•¼ ë Œë”ë§ ëœë‹¤. 
> JSP ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë·° í…œí”Œë¦¿ë“¤ì€ `forward()`ê³¼ì • ì—†ì´ ë°”ë¡œ ë Œë”ë§ ëœë‹¤.
> - `Thymeleaf` ë·° í…Œë¯ˆë¦¿ì„ ì‚¬ìš©í•˜ë©´ `ThymeleafViewResolver`ë¥¼ ë“±ë¡í•´ì•¼ í•œë‹¤. ìµœê·¼ì—ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì¶”ê°€í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ëª¨ë‘ ìë™í™” í•´ì¤€ë‹¤.

## ìŠ¤í”„ë§ MVC
ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•´ì„œ, ë§¤ìš° ìš°ì—°í•˜ê³  ì‹¤ìš©ì ì´ë‹¤.

`@RequestMapping`
- `RequestMappingHandlerMapping`
- `RequestMappingHandlerAdatper`

ìŠ¤í”„ë§ì—ì„œ ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¡œ, `@RequestMapping`ì˜ ì•ê¸€ìë¥¼ ë”°ì„œ ë§Œë“  ì´ë¦„ì¸ë°,
ì´ê²ƒì´ ë°”ë¡œ í˜„ì¬ì˜ ìŠ¤í”„ë§ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§€ì›í•˜ëŠ” í•¸ë“¤ë¡œ ë§¤í•‘ê³¼ ì–´ëŒ‘í„°ì´ë‹¤. ì‹¤ë¬´ì—ì„œëŠ” 99.9% ì´ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•œë‹¤.

### SpringMemberFormControllerV1 - íšŒì› ë“±ë¡ í¼
```java
@Controller
public class SpringMemberFormControllerV1 {
    
    @RequestMapping("/springmvc/v1/members/new-form")
    public ModelAndView process() {
        return new ModelAndView("new-form");
    }
}
```

- `@Controller`
  - ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤. (ë‚´ë¶€ì— `@Component` ì• ë…¸í…Œì´ì…˜ì´ ìˆì–´ì„œ ì»¨í† ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ëœë‹¤.)
  - ìŠ¤í”„ë§ MVCì—ì„œ ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì¸ì‹í•œë‹¤. ì¦‰, `RequestMappingHandlerMapping`ì—ì„œ ë§¤í•‘ ì •ë³´ë¥¼ ì¸ì‹í•œë‹¤.
- `@RequestMapping`
  - ìš”ì²­ ì •ë³´ë¥¼ ë§¤í•‘í•œë‹¤.
  - í•´ë‹¹ URLì´ í˜¸ì¶œë˜ë©´, ì´ ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤.
  - ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë©”ì„œë“œì˜ ì´ë¦„ì€ ì„ì˜ë¡œ ì§€ìœ¼ë©´ ëœë‹¤.
- `@ModelAndView`
  - ëª¨ë¸ê³¼ ë·° ì •ë³´ë¥¼ ë‹´ì•„ì„œ ë°˜í™˜í•˜ë©´ ëœë‹¤.

`RequestMappingHandlerMapping`ì€ ìŠ¤í”„ë§ ë¹ˆ ì¤‘ì—ì„œ `@RequestMapping` ë˜ëŠ” `@Controller`ê°€ í´ë˜ìŠ¤ ë ˆë²¨ì— ë¶™ì–´ ìˆëŠ” ê²½ìš°ì— ë§¤í•‘ ì •ë³´ë¡œ ì¸ì‹í•œë‹¤. ë”°ë¼ì„œ ë‹¤ìŒ ì½”ë“œë„ ë™ë¦¬í•˜ê²Œ ë™ì‘í•œë‹¤.
```java
@Component
@RequestMapping
public class SpringMemberFormControllerV1 {

    @RequestMapping("/springmvc/v1/members/new-form")
    public ModelAndView process() {
        return new ModelAndView("new-form");
    }
}
```

ì»¨í¬ë„ŒíŠ¸ ìŠ¤ìº” ì—†ì´ ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì§ì ‘ ë“±ë¡í•´ë„ ë™ì‘í•œë‹¤.
```java
@RequestMapping
public class SpringMemberFormControllerV1 {

    @RequestMapping("/springmvc/v1/members/new-form")
    public ModelAndView process() {
        return new ModelAndView("new-form");
    }
}
```
### ServletApplication
```java
// ìŠ¤í”„ë§ ë¹ˆ ì§ì ‘ ë“±ë¡
@Bean
TestController testController() {
    return new TestController();
}
```

### SpringMemberSaveControllerV1 - íšŒì› ì €ì¥
```java
@Controller
public class SpringMemberSaveControllerV1 {
    
    private MemberRepository memberRepository = MemberRepository.getInstance();
    
    @RequestMapping("/springmvc/v1/members/save")
    public ModelAndView process(HttpServletRequest request, HttpServletResponse response) {
        
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));
        
        Member member = new Member(username, age);
        memberRepository.save(member);
        
        ModelAndView mv = new ModelAndView("save-result");
        mv.addObject("member", member); // ModelAndViewì—ì„œ Model ë°ì´í„° ì¶”ê°€í•  ë•Œ ì´ìš©
        return mv;
    }
}
```

### SpringMemberListControllerV1 - íšŒì› ëª©ë¡
```java
@Controller
public class SpringMemberListControllerV1 {
    
    private MemberRepository memberRepository = MemberRepository.getInstance();
    
    @RequestMapping("/springmvc/v1/members")
    public ModelAndView process() {
        
        List<Member> members = memberRepository.findAll();
        
        ModelAndView mv = new ModelAndView("members");
        mv.addObject("members", members);
        return mv;
    }
}
```

### ì»¨íŠ¸ë¡¤ëŸ¬ í†µí•©
`@RequestMapping`ì„ ì˜ ë³´ë©´ í´ë˜ìŠ¤ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ ë©”ì„œë“œ ë‹¨ìœ„ì— ì ìš©ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ë¥¼ ìœ ì—°í•˜ê²Œ í•˜ë‚˜ë¡œ í†µí•©í•  ìˆ˜ ìˆë‹¤.

### SpringMemberControllerV2
```java
/**
* í´ë˜ìŠ¤ ë‹¨ìœ„ -> ë©”ì„œë“œ ë‹¨ìœ„
* @RequestMapping í´ë˜ìŠ¤ ë ˆë²¨ê³¼ ë©”ì„œë“œ ë ˆë²¨ ì¡°í•©
*/
@Controller
@RequestMapping("/springmvc/v2/members")
public class SpringMemberControllerV2 {
    
    private MemberRepository memberRepository = MemberRepository.getInstance();
    
    @RequestMapping("/new-form")
    public ModelAndView newForm() {
    	return new ModelAndView("new-form");
    }
    
    @RequestMapping("/save")
    public ModelAndView save(HttpServletRequest request, HttpServletResponse response) {
        
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));
        
        Member member = new Member(username, age);
        memberRepository.save(member);
        
        ModelAndView mav = new ModelAndView("save-result");
        mav.addObject("member", member);
        return mav;
    }
    
    @RequestMapping
    public ModelAndView members() {
        
	    List<Member> members = memberRepository.findAll();
        
        ModelAndView mav = new ModelAndView("members");
        mav.addObject("members", members);
        return mav;
    }
}
```

#### ì¡°í•©
ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ë¥¼ í†µí•©í•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œ ì¡°í•©ë„ ê°€ëŠ¥í•˜ë‹¤. ë‹¤ìŒ ì½”ë“œëŠ” `/springmvc/v2/members`ë¼ëŠ” ë¶€ë¶„ì— ì¤‘ë³µì´ ìˆë‹¤.
- `@RequestMapping("/springmvc/v2/members/new-form")`
- `@RequestMapping("/springmvc/v2/members")`
- `@RequestMapping("/springmvc/v2/members/save")`  

ë¬¼ë¡  ì´ë ‡ê²Œ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•©í•œ ì˜ˆì œ ì½”ë“œë¥¼ ë³´ë©´ ì–´ë–»ê²Œ ì¤‘ë³µì„ ì œê±°í–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
í´ë˜ìŠ¤ ë ˆë²¨ì— ë‹¤ìŒê³¼ ê°™ì´ `@RequestMapping`ì„ ë‘ë©´ ë©”ì„œë“œ ë ˆë²¨ê³¼ ì¡°í•©ì´ ëœë‹¤.

### ì‹¤ìš©ì ì¸ ë°©ì‹
MVC í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸°ì—ì„œ V3ëŠ” ModelViewë¥¼ ê°œë°œìê°€ ì§ì ‘ ìƒì„±í•´ì„œ ë°˜í™˜í•˜ëŠ” ì ì´ ë¶ˆí¸ ìš”ì†Œì´ë‹¤.
ìŠ¤í”„ë§ MVCëŠ” ê°œë°œìê°€ í¸ë¦¬í•˜ê²Œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ìˆ˜ ë§ì€ í¸ì˜ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

ğŸš¨ ì‹¤ë¬´ì—ì„œëŠ” ì§€ê¸ˆë¶€í„° ì„¤ëª…í•˜ëŠ” ë°©ì‹ì„ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.
### SpringMemberControllerV3
```java
/**
* v3
* Model ë„ì…
* ViewName ì§ì ‘ ë°˜í™˜
* @RequestParam ì‚¬ìš©
* @RequestMapping -> @GetMapping, @PostMapping
*/
@Controller
@RequestMapping("/springmvc/v3/members")
public class SpringMemberControllerV3 {
    
    private MemberRepository memberRepository = MemberRepository.getInstance();
    
    @GetMapping("/new-form")
    public String newForm() {
	    return "new-form";
    }
    
    @PostMapping("/save")
    public String save(
            @RequestParam("username") String username,
            @RequestParam("age") int age,
            Model model) {
        
        Member member = new Member(username, age);
        memberRepository.save(member);
        
        model.addAttribute("member", member);
        return "save-result";
    }
    
    @GetMapping
    public String members(Model model) {
        List<Member> members = memberRepository.findAll();
        model.addAttribute("members", members);
        return "members";
    }
}
```
- Model íŒŒë¼ë¯¸í„°
  - `save()`, `members()`ë¥¼ ë³´ë©´ Modelì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ViewName ì§ì ‘ ë°˜í™˜
  - ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.
- @RequestParam ì‚¬ìš©
  - ìŠ¤í”„ë§ì€ HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ `@RequestParam`ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
  - `@Requestparam("username")`ì€ `request.getParameter("username")`ê³¼ ê±°ì˜ ê°™ì€ ì½”ë“œë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.
  - ë¬¼ë¡ , GET ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, POST Form ë°©ì‹ì„ ëª¨ë‘ ì§€ì›í•œë‹¤.
- @RequestMapping, @GetMapping, @PostMapping
  - `@RequestMapping`ì€ URLë§Œ ë§¤ì¹­í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP Methodë„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
  - ì˜ˆ) URL: /new-form, Http Method: GETì¸ ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ì²˜ë¦¬í•˜ë©´ ëœë‹¤.  
    ```java
    @RequestMapping(value = "/new-form", method = RequestMethod.GET)
    ```
  - ì´ê²ƒì„ `@GetMapping`, `@PostMapping`ìœ¼ë¡œ ë” í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 
  - > ğŸ€ GET, POST, PUT, DELETE, PATCH ëª¨ë‘ ì• ë…¸í…Œì´ì…˜ì´ ì¤€ë¹„ë˜ì–´ ìˆë‹¤.

###### ğŸ€ `@GetMappingì˜ ë‚´ë¶€`
```java
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@RequestMapping(method = RequestMethod.GET)
public @interface GetMapping {
    ...
}
```