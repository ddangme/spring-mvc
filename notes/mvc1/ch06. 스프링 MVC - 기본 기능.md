## í”„ë¡œì íŠ¸ ìƒì„±
```text
Project: Gradle Project
Language: Java
Spring Boot: 2.4.x
Packaging: Jar
Java: 11
Dependencies: Spring Web, Thymeleaf, Lombok
```
### build.gradle
```text
plugins {
    id 'org.springframework.boot' version '2.4.3'
    id 'io.spring.dependency-management' version '1.0.11.RELEASE'
    id 'java'
}

group = 'hello'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

configurations {
    compileOnly {
    	extendsFrom annotationProcessor
    }
}

repositories {
	mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

test {
	useJUnitPlatform()
}
```


## ë¡œê¹… ê°„ë‹¨íˆ ì•Œì•„ë³´ê¸°
ìš´ì˜ ì‹œìŠ¤í…œì—ì„œëŠ” `System.out.println()` ê°™ì€ ì‹œìŠ¤í…œ ì½˜ì†”ì„ ì‚¬ìš©í•´ì„œ ì¶œë ¥í•˜ì§€ ì•Šê³ , ë³„ë„ì˜ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤.

### ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬
ìŠ¤í”„ë§ ë¶€íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬(`spring-boot-starter-logging`)ê°€ í•¨ê»˜ í¬í•¨ëœë‹¤.  
ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê¸°ë³¸ìœ¼ë¡œ ë‹¤ìŒ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.
- [SLF4J](http://www.slf4j.org)
- [Logback](http://logback.qos.ch)

ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Logback. Log4J, Log4J2 ë“±ë“± ìˆ˜ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆëŠ”ë°, ê·¸ê²ƒì„ í†µí•©í•´ì„œ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ëŠ” ê²ƒì´ ë°”ë¡œ `SLF4J` ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ SLF4JëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê³ , ê·¸ êµ¬í˜„ì²´ë¡œ Logback ê°™ì€ ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒí•˜ë©´ ëœë‹¤. 
ì‹¤ë¬´ì—ì„œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” Logbackì„ ëŒ€ë¶€ë¶„ ì‚¬ìš©í•œë‹¤.

> ğŸš¨ ì‹¤ë¬´ì—ì„œëŠ” í•­ìƒ ë¡œê·¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

### ë¡œê·¸ ì„ ì–¸
- `private Logger log = LoggerFactory.getLogger(getClass())`
- `private static final Logger log = LoggerFactory.getLogger(xxx.class)`
- `@Slf4j`: ë¡¬ë³µ ì‚¬ìš© ê°€ëŠ¥
### ë¡œê·¸ í˜¸ì¶œ
- `log.info("hello")`
- `System.out.prinfln("hello")` ì‹œìŠ¤í…œ ì½˜ì†”ë¡œ ì§ì ‘ ì¶œë ¥í•˜ëŠ” ê²ƒ ë³´ë‹¤ ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì´ ìˆë‹¤.

#### LogTestController
```java
@RestController
public class LogTestController {
    
    private final Logger log = LoggerFactory.getLogger(getClass());
    
    @RequestMapping("/log-test")
    public String logTest() {
        String name = "Spring";
        
        log.trace("trace log={}", name);
        log.debug("debug log={}", name);
        log.info(" info log={}", name);
        log.warn(" warn log={}", name);
        log.error("error log={}", name);
        
        //ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ a+b ê³„ì‚° ë¡œì§ì´ ë¨¼ì € ì‹¤í–‰ë¨, ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ X
        log.debug("String concat log=" + name);
        return "ok";
    }
}
```

##### ë§¤í•‘ ì •ë³´ `@RestController`
- `@Controller`ëŠ” ë°˜í™˜ ê°’ì´ Stringì´ë©´ ë·° ì´ë¦„ìœ¼ë¡œ ì¸ì‹ë˜ì–´ ë·°ë¥¼ ì°¾ê³  ë·°ê°€ ë Œë”ë§ëœë‹¤.
- `@RestController`ëŠ” ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹Œ, **HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥**í•œë‹¤. ë”°ë¼ì„œ ìœ„ì˜ ì½”ë“œëŠ” ì‹¤í–‰ ê²°ê³¼ë¡œ ok ë©”ì‹œì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.

##### í…ŒìŠ¤íŠ¸
- **ì‹œê°„, ë¡œê·¸ ë ˆë²¨, í”„ë¡œì„¸ìŠ¤ ID, ì“°ë ˆë“œ ëª…, í´ë˜ìŠ¤ëª…, ë¡œê·¸ ë©”ì‹œì§€**ê°€ ì¶œë ¥ëœë‹¤.
-  Level: TRACE > DEBUG > INFO > WARN > ERROR
  - ê°œë°œ ì„œë²„ëŠ” debug ì¶œë ¥, ìš´ì˜ ì„œë²„ëŠ” info ì¶œë ¥
  - 
### ë¡œê·¸ ë ˆë²¨ ì„¤ì •
`application.properties`
```properties
#ì „ì²´ ë¡œê·¸ ë ˆë²¨ ì„¤ì •(ê¸°ë³¸ info)
logging.level.root=info

#hello.springmvc íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ ë¡œê·¸ ë ˆë²¨ ì„¤ì •
logging.level.hello.springmvc=debug
```

### ì˜¬ë°”ë¥¸ ë¡œê·¸ ì‚¬ìš©ë²•
- `log.debug("data="+data)` ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ infoë¡œ ì„¤ì •í•´ë„ í•´ë‹¹ ì½”ë“œì— ìˆëŠ” "data="+dataê°€ ì‹¤ì œ ì‹¤í–‰ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ë¬¸ì ë”í•˜ê¸° ì—°ì‚°ì´ ë°œìƒí•œë‹¤.
- `log.debug("data={}, data)` ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ infoë¡œ ì„¤ì •í•˜ë©´ ì•„ë¬´ì¼ë„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì•ê³¼ ê°™ì€ ì˜ë¯¸ì—†ëŠ” ì—°ì‚°ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

### ë¡œê·¸ ì‚¬ìš© ì‹œ ì¥ì 
- ì“°ë ˆë“œ ì •ë³´, í´ë˜ìŠ¤ ì´ë¦„ ê°™ì€ ë¶€ê°€ ì •ë³´ë¥¼ í•¨ê²Œ ë³¼ ìˆ˜ ìˆê³ , ì¶œë ¥ ëª¨ì–‘ì„ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ ë ˆë²¨ì— ë”°ë¼ ê°œë°œ ì„œë²„ì—ì„œëŠ” ëª¨ë“  ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ê³ , ìš´ì˜ì„œë²„ì—ì„œëŠ” ì¶œë ¥í•˜ì§€ ì•ŠëŠ” ë“± ë¡œê·¸ë¥¼ ìƒí™©ì— ë§ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.
- ì‹œìŠ¤í…œ ì•„ì›ƒ ì½˜ì†”ì—ë§Œ ì¶œë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, íŒŒì¼ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ë“±, ë¡œê·¸ë¥¼ ë³„ë„ì˜ ìœ„ì¹˜ë¡œ ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤.
íŠ¹íˆ íŒŒì¼ë¡œ ë‚¨ê¸¸ ë•ŒëŠ” ì¼ë³„, íŠ¹ì • ìš©ëŸ‰ì— ë”°ë¼ ë¡œê·¸ë¥¼ ë¶„í• í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
- ì„±ëŠ¥ë„ ì¼ë°˜ System.outë³´ë‹¤ ì¢‹ë‹¤. (ë‚´ë¶€ ë²„í¼ë§, ë©€í‹° ì“°ë ˆë“œ ë“±ë“±)

## ìš”ì²­ ë§¤í•‘
### MappingController
```java
@RestController
public class MappingController {
    private Logger log = LoggerFactory.getLogger(getClass());

    @RequestMapping("/hello-basic")
    public String helloBasic() {
        log.info("helloBasic");
        return "ok";
    }
}
```
- `@RequestMapping("/hello-basic")`
  - `/hello-basic` URL í˜¸ì¶œì´ ì˜¤ë©´ ì´ ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ë„ë¡ ë§¤í•‘í•œë‹¤.
  - ëŒ€ë¶€ë¶„ì˜ ì†ì„±ì„ ë°°ì—´ë¡œ ì œê³µí•˜ë¯€ë¡œ **ë‹¤ì¤‘ ì„¤ì •ì´ ê°€ëŠ¥**í•˜ë‹¤. {"/hello-basic", "/hello-go"}

> ğŸ€ `/hello-basic`, `/hello-basic/` ë‘ ìš”ì²­ì€ ë‹¤ë¥¸ URLì´ì§€ë§Œ, ìŠ¤í”„ë§ì€ ê°™ì€ ìš”ì²­ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.

### HTTP ë©”ì„œë“œ
- `@RequestMapping` ì— method ì†ì„±ìœ¼ë¡œ HTTP ë©”ì„œë“œë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ HTTP ë©”ì„œë“œì™€ ë¬´ê´€í•˜ê²Œ í˜¸ì¶œëœë‹¤.
  (GET, HEAD, POST, PUT, PATCH, DELETE ëª¨ë‘ í—ˆìš©)

### HTTP ë©”ì„œë“œ ë§¤í•‘
```java
    @RequestMapping(value = "/mapping-get-v1", method = RequestMethod.GET)
    public String mappingGetV1() {
        log.info("mappingGetV1");
        return "ok";
    }
```
- ë§Œì•½, í•´ë‹¹ ê²½ë¡œì— POST ë§¤í•‘ì„ ìš”ì²­í•˜ë©´ ìŠ¤í”„ë§ MVCëŠ” 405 ìƒíƒœì½”ë“œ(Method Not Allowed)ë¥¼ ë°˜í™˜í•œë‹¤.

### HTTP ë©”ì„œë“œ ì¶•ì•½
```java
@GetMapping(value = "/mapping-get-v2")
public String mappingGetV2() {
	log.info("mapping-get-v2");
    return "ok";
}
```
- í¸ë¦¬í•œ ì¶•ì•½ ì• ë…¸í…Œì´ì…˜
  - @GetMapping
  - @PostMapping
  - @PutMapping
  - @DeleteMapping
  - @PatchMapping
- HTTP ë©”ì„œë“œë¥¼ ì¶•ì•½í•œ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì§ê´€ì ì´ë‹¤.
ì½”ë“œë¥¼ ë³´ë©´ ë‚´ë¶€ì—ì„œ `@RequestMapping` ê³¼ `method` ë¥¼ ì§€ì •í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### PathVariable(ê²½ë¡œ ë³€ìˆ˜) ì‚¬ìš©
```java
@GetMapping("/mapping/{userId}")
public String mappingPath(@PathVariable("userId") String data) {
    log.info("mappingPath userId={}", data);
    return "ok";
}
```
- ìµœê·¼ HTTP APIëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë¦¬ì†ŒìŠ¤ ê²½ë¡œì— ì‹ë³„ìë¥¼ ë„£ëŠ” ìŠ¤íƒ€ì¼ì„ ì„ í˜¸í•œë‹¤.
  - `/mapping/userA`
  - `/users/1`
- `@RequestMapping` ì€ URL ê²½ë¡œë¥¼ í…œí”Œë¦¿í™” í•  ìˆ˜ ìˆëŠ”ë°, `@PathVariable` ì„ ì‚¬ìš©í•˜ë©´ ë§¤ì¹­ ë˜ëŠ” ë¶€ë¶„ì„ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- @PathVariable ì˜ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ê°™ìœ¼ë©´ ìƒëµí•  ìˆ˜ ìˆë‹¤. (ì˜ˆ: @PathVariable("userId") String userId -> @PathVariable userId)

### PathVariable ë‹¤ì¤‘ ì‚¬ìš©
```java
@GetMapping("/mapping/users/{userId}/orders/{orderId}")
public String mappingPath(@PathVariable String userId, @PathVariable Long orderId) {
    log.info("mappingPath userId={}, orderId={}", userId, orderId);
    return "ok";
}
```

### íŠ¹ì • íŒŒë¼ë¯¸í„° ì¡°ê±´ ë§¤í•‘
```java
@GetMapping(value = "/mapping-param", params = "mode=debug")
public String mappingParam() {
    log.info("mappingParam");
    return "ok";
}
```
- íŠ¹ì • íŒŒë¼ë¯¸í„°ê°€ ìˆê±°ë‚˜ ì—†ëŠ” ì¡°ê±´ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ì˜ ì‚¬ìš©í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.
- íŒŒë¼ë¯¸í„°ë¡œ ì¶”ê°€ ë§¤í•‘
  - params="mode",
  - params="!mode"
  - params="mode=debug"
  - params="mode!=debug" (! = )
  - params = {"mode=debug","data=good"}
### íŠ¹ì • í—¤ë” ì¡°ê±´ ë§¤í•‘
```java
@GetMapping(value = "/mapping-header", headers = "mode=debug")
public String mappingHeader() {
    log.info("mappingHeader");
    return "ok";
}
```
- íŒŒë¼ë¯¸í„° ë§¤í•‘ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, HTTP í—¤ë”ë¥¼ ì‚¬ìš©í•œë‹¤.
- íŠ¹ì • í—¤ë”ë¡œ ì¶”ê°€ ë§¤í•‘
  - headers="mode",
  - headers="!mode"
  - headers="mode=debug"
  - headers="mode!=debug" (! = )
### ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘ - HTTP ìš”ì²­ Content-Type, consume
```java
@PostMapping(value = "/mapping-consume", consumes = "application/json")
public String mappingConsumes() {
    log.info("mappingConsumes");
    return "ok";
}
```
- HTTP ìš”ì²­ì˜ Content-Type í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤. 
- ë§Œì•½ ë§ì§€ ì•Šìœ¼ë©´ HTTP 415 ìƒíƒœì½”ë“œ(Unsupported Media Type)ì„ ë°˜í™˜í•œë‹¤.
- Content-Type í—¤ë” ê¸°ë°˜ ì¶”ê°€ ë§¤í•‘ Media Type
  - consumes="application/json"
  - consumes="!application/json"
  - consumes="application/*"
  - consumes="*\/*"
  - MediaType.APPLICATION_JSON_VALUE
- ì˜ˆ) 
    ```text
    consumes = "text/plain"
    consumes = {"text/plain", "application/*"}
    consumes = MediaType.TEXT_PLAIN_VALUE
    ```

### ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘ - HTTP ìš”ì²­ Accept, produce
```java
@PostMapping(value = "/mapping-produce", produces = "text/html")
public String mappingProduces() {
    log.info("mappingProduces");
    return "ok";
}
```
- HTTP ìš”ì²­ì˜ Accept í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤. 
- ë§Œì•½ ë§ì§€ ì•Šìœ¼ë©´ HTTP 406 ìƒíƒœì½”ë“œ(Not Acceptable)ì„ ë°˜í™˜í•œë‹¤.
- Accept í—¤ë” ê¸°ë°˜ Media Type
  - produces = "text/html"
  - produces = "!text/html"
  - produces = "text/*"
  - produces = "*\/*"
- ì˜ˆ)
    ```text
    produces = "text/plain"
    produces = {"text/plain", "application/*"}
    produces = MediaType.TEXT_PLAIN_VALUE
    produces = "text/plain;charset=UTF-8"
    ```
### API ì˜ˆì‹œ
íšŒì› ê´€ë¦¬ë¥¼ HTTP APIë¡œ ë§Œë“ ë‹¤ ìƒê°í•˜ê³  ë§¤í•‘ì„ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ì•Œì•„ë³´ì. (ì‹¤ì œ ë°ì´í„°ê°€ ë„˜ì–´ê°€ëŠ” ë¶€ë¶„ì€ ìƒëµí•˜ê³  URL ë§¤í•‘ë§Œ)
- íšŒì› ëª©ë¡ ì¡°íšŒ: GET `/users`
- íšŒì› ë“±ë¡: POST `/users`
- íšŒì› ì¡°íšŒ: GET `/users/{userId}`
- íšŒì› ìˆ˜ì •: PATCH `/users/{userId}`
- íšŒì› ì‚­ì œ: DELETE `/users/{userId}`
```java
@RestController
@RequestMapping("/mapping/users")
public class MappingClassController {
    
    @GetMapping
    public String users() {
        return "get users";
    }
    
    @PostMapping
    public String addUser() {
        return "post user";
    }
    
    @GetMapping("/{userId}")
    public String findUser(@PathVariable String userId) {
        return "get userId=" + userId;
    }
    
    @PatchMapping("/{userId}")
    public String updateUser(@PathVariable String userId) {
        return "update userId=" + userId;
    }
    
    @DeleteMapping("/{userId}")
    public String deleteUser(@PathVariable String userId) {
        return "delete userId=" + userId;
    }
}
```
- `@RequestMapping("/mapping/users")` í´ë˜ìŠ¤ ë ˆë²¨ì— ë§¤í•‘ ì •ë³´ë¥¼ ë‘ë©´ ë©”ì„œë“œ ë ˆë²¨ì—ì„œ í•´ë‹¹ ì •ë³´ë¥¼ ì¡°í•©í•´ì„œ ì‚¬ìš©í•œë‹¤.

## HTTP ìš”ì²­
### ê¸°ë³¸, í—¤ë” ì¡°íšŒ
#### RequestHeaderController
```java
@Slf4j
@RestController
public class RequestHeaderController {
@RequestMapping("/headers")
    public String headers(HttpServletRequest request,
                          HttpServletResponse response,
                          HttpMethod httpMethod,
                          Locale locale,
                          @RequestHeader MultiValueMap<String, String> headerMap,
                          @RequestHeader("host") String host,
                          @CookieValue(value = "myCookie", required = false) String cookie
                         ) {
        log.info("request={}", request);
        log.info("response={}", response);
        log.info("httpMethod={}", httpMethod);
        log.info("locale={}", locale);
        log.info("headerMap={}", headerMap);
        log.info("header host={}", host);
        log.info("myCookie={}", cookie);
        return "ok";
    }
}
```
- `HttpServletRequest`
- `HttpServletResponse`
- `HttpMethod`
  - HTTP ë©”ì„œë“œë¥¼ ì¡°íšŒí•œë‹¤.
  - `org.springframework.http.HttpMethod`
- `Locale`
  - Locale ì •ë³´ë¥¼ ì¡°íšŒí•œë‹¤.
- `@RequestHeader MultiValueMap<String, String> headerMap`
  - ëª¨ë“  HTTP í—¤ë”ë¥¼ MultiValueMap í˜•ì‹ìœ¼ë¡œ ì¡°íšŒí•œë‹¤.
- `@RequestHeader("host") String host`
  - íŠ¹ì • HTTP í—¤ë”ë¥¼ ì¡°íšŒí•œë‹¤.
  - ì†ì„±
    - í•„ìˆ˜ ê°’ ì—¬ë¶€: required
    - ê¸°ë³¸ ê°’ ì†ì„±: defaultValue
- `@CookieValue(value = "myCookie", required = false) String cookie`
  - íŠ¹ì • ì¿ í‚¤ë¥¼ ì¡°íšŒí•œë‹¤.
  - ì†ì„±
    - í•„ìˆ˜ ê°’ ì—¬ë¶€: required
    - ê¸°ë³¸ ê°’ ì†ì„±: defaultValue
- `MultiValueMap`
  - MAPê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, í•˜ë‚˜ì˜ í‚¤ì— ì—¬ëŸ¬ ê°’ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.
  - HTTP header, HTTP ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì™€ ê°™ì´ í•˜ë‚˜ì˜ í‚¤ì— ì—¬ëŸ¬ ê°’ì„ ë°›ì„ ë•Œ ì‚¬ìš©í•œë‹¤.
    - keyA=value1&keyA=value2
  ```java
  MultiValueMap<String, String> map = new LinkedMultiValueMap();
  map.add("keyA", value1);
  map.add("keyA", value2);
  
  // [value1, value2]
  List<String> values = map.get("keyA");
  ```
### @Slf4j
ë‹¤ìŒ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì„œ ë¡œê·¸ë¥¼ ì„ ì–¸í•´ ì¤€ë‹¤. ê°œë°œìëŠ” í¸ë¦¬í•˜ê²Œ `log`ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
```java
private static fianl org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(RequestHeaderController.class);
```

> ğŸ€ [ìŠ¤í”„ë§ MVC ê³µì‹ ë¬¸ì„œ](https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller.html)

## HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°
### ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form
#### HTTP ìš”ì²­ ë°ì´í„° ì¡°íšŒ - ê°œìš”
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•ŒëŠ” ì£¼ë¡œ ë‹¤ìŒ 3ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.
1. GET - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
   - `/url?username=hello&age=20`
   - ë©”ì‹œì§€ ë°”ë”” ì—†ì´, URLì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ë°ì´í„°ë¥¼ í¬í•¨í•´ì„œ ì „ë‹¬
   - ì˜ˆ) ê²€ìƒ‰, í•„í„°, í˜ì´ì§• ë“±ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
2. POST - HTML Form
   - content-type: application/x-www-form-urlencoded
   - ë©”ì‹œì§€ ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ (username=hello&age=20)
   - ì˜ˆ) íšŒì› ê°€ì…, ìƒí’ˆ ì£¼ë¬¸, HTML Form ì‚¬ìš©
3. HTTP message bodyì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­
   - HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš© (JSON, XML, TEXT)
   - ë°ì´í„° í˜•ì‹ì€ ì£¼ë¡œ JSON ì‚¬ìš©
   - POST, PUT, PATCH
## ìš”ì²­ íŒŒë¼ë¯¸í„° - ì¿¼ë¦¬íŒŒë¼ë¯¸í„°, HTML Form
HttpServletRequestì˜ request.getParameter()ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒ ë‘ê°€ì§€ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
1. GET, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì „ì†¡ ì˜ˆì‹œ: `http://localhost:8080/request-param?username=hello&age=20`
2. POST, HTML Form ì „ì†¡ ì˜ˆì‹œ
```text
POST /request-param ...
content-type: application/x-www-form-urlencoded

username=hello&age=20
```

GET ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ë°©ì‹, POST HTML Form ì „ì†¡ ë°©ì‹ ëª¨ë‘ í˜•ì‹ì´ ê°™ê¸° ë•Œë¬¸ì— ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
ì´ê²ƒì„ `ìš”ì²­ íŒŒë¼ë¯¸í„°(request parameter) ì¡°íšŒ`ë¼ê³  í•œë‹¤.

### `RequestParamController.java`
```java
@Slf4j
@Controller
public class RequestParamController {
    /**
	* ë°˜í™˜ íƒ€ì…ì´ ì—†ìœ¼ë©´ì„œ ì´ë ‡ê²Œ ì‘ë‹µì— ê°’ì„ ì§ì ‘ ì§‘ì–´ë„£ìœ¼ë©´, view ì¡°íšŒX
    */
    @RequestMapping("/request-param-v1")
    public void requestParamV1(HttpServletRequest request, HttpServletResponse response) throws IOException {
        
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));
        log.info("username={}, age={}", username, age);
        
        response.getWriter().write("ok");
    }
}
```
- `request.getParameter`: ë‹¨ìˆœíˆ HttpServletRequestê°€ ì œê³µí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí–ˆë‹¤.
- `GET` ì‹¤í–‰: `http://localhost:8080/request-param-v1?username=hello&age=20`

### `static/basic/hello-form.html`
```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Title</title>
  </head>
  
  <body>
    <form action="/request-param-v1" method="post">
      username: <input type="text" name="username" />
      age: <input type="text" name="age" />
      <button type="submit">ì „ì†¡</button>
    </form>
  </body>
</html>
```

### `@RequestParam`
ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” `@RequestParam`ì„ ì‚¬ìš©í•˜ë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
#### requestParamV2()
```java
/**
* @RequestParam ì‚¬ìš©
* - íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë°”ì¸ë”©
* @ResponseBody ì¶”ê°€
* - View ì¡°íšŒë¥¼ ë¬´ì‹œí•˜ê³ , HTTP message bodyì— ì§ì ‘ í•´ë‹¹ ë‚´ìš© ì…ë ¥
*/
@ResponseBody
@RequestMapping("/request-param-v2")
public String requestParamV2(
    @RequestParam("username") String memberName,
    @RequestParam("age") int memberAge) {
    
    log.info("username={}, age={}", memberName, memberAge);
    return "ok";
}


```

@RequestParamì˜ `name(value)` ì†ì„±ì´ íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©
  - @RequestParam("username") String memberName    
â¡ï¸ request.getParameter("username")

#### requestParamV3()
```java
@ResponseBody
@RequestMapping("/request-param-v3")
public String requestParamV3(
    @RequestParam String username,
    @RequestParam int age) {
    log.info("username={}, age={}", username, age);
    return "ok";
}
```
HTTP íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ë³€ìˆ˜ ì´ë¦„ê³¼ ê°™ìœ¼ë©´ `@Requestparam(name="xx")`ì„ ìƒëµ í•  ìˆ˜ ìˆë‹¤.
#### requestParamV4()
```java
@ResponseBody
@RequestMapping("/request-param-v4")
public String requestParamV4(String username, int age) {
    log.info("username={}, age={}", username, age);
    return "ok";
}
```

String, int ë“± ë‹¨ìˆœ íƒ€ì…ì´ë©´ `@RequestParam` ë„ ìƒëµí•  ìˆ˜ ìˆë‹¤.  
ğŸ€ ì• ë…¸í…Œì´ì…˜ì„ ì™„ì „íˆ ìƒëµí•´ë„ ë˜ì§€ë§Œ, `@RequestParam`ì´ ìˆìœ¼ë©´ ëª…í™•í•˜ê²Œ ìš”ì²­ íŒŒë¼ë¯¸í„°ì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë‹¤ëŠ” ê²ƒì„ ì•Œë¦´ ìˆ˜ ìˆë‹¤.

### íŒŒë¼ë¯¸í„° í•„ìˆ˜ ì—¬ë¶€ - requestParamRequired
```java
@ResponseBody
@RequestMapping("/request-param-required")
public String requestParamRequired(
    @RequestParam(required = true) String username,
    @RequestParam(required = false) Integer age) {
    
    log.info("username={}, age={}", username, age);
    return "ok";
}
```
- `@RequiredParam.required`
  - íŒŒë¼ë¯¸í„° í•„ìˆ˜ ì—¬ë¶€
  - ê¸°ë³¸ ê°’ì´ íŒŒë¼ë¯¸í„° í•„ìˆ˜(ture)ì´ë‹¤.
- `/request-param` ìš”ì²­
  - `username` ì´ ì—†ìœ¼ë¯€ë¡œ 400 ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.

> ğŸš¨ ì£¼ì˜  
> 1. íŒŒë¼ë¯¸í„° ì´ë¦„ë§Œ ì‚¬ìš©  
>    - `request-param?username=` íŒŒë¼ë¯¸í„° ì´ë¦„ë§Œ ìˆê³  ê°’ì´ ì—†ëŠ” ê²½ìš° â¡ï¸ ë¹ˆë¬¸ìë¡œ í†µê³¼ëœë‹¤.
> 2. ê¸°ë³¸(primitive)ì— null ì…ë ¥
>    - `request-param` ìš”ì²­ `@RequestParam(required = false) int age`ì—ì„œ `null`ì„ `int`ì— ì…ë ¥í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ê¸°ì—
> (500 ì˜ˆì™¸ ë°œìƒ) `null`ì„ ë°›ì„ ìˆ˜ ìˆëŠ” `Integer`ë¡œ ë³€ê²½í•˜ê±°ë‚˜, ë˜ëŠ” `defaultValue`ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

#### requiredParamDefault()
```java
@ResponseBody
@RequestMapping("/request-param-default")
public String requestParamDefault(
    @RequestParam(required = true, defaultValue = "guest") String username,
    @RequestParam(required = false, defaultValue = "-1") int age) {
    log.info("username={}, age={}", username, age);
    return "ok";
}
```
íŒŒë¼ë¯¸í„°ì— ê°’ì´ ì—†ëŠ” ê²½ìš° `defaultValue`ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ê°’ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. ì´ë¯¸ ê¸°ë³¸ ê°’ì´ ìˆê¸° ë•Œë¬¸ì— `required`ëŠ” ì˜ë¯¸ê°€ ì—†ë‹¤.  
`defaultValue`ëŠ” ë¹ˆ ë¬¸ìì˜ ê²½ìš°ì—ë„ ì„¤ì •í•œ ê¸°ë³¸ ê°’ì´ ì ìš©ëœë‹¤. `/required-param?username=`

### íŒŒë¼ë¯¸í„°ë¥¼ Mapìœ¼ë¡œ ì¡°íšŒí•˜ê¸° - requestParamMap
```java
@ResponseBody
@RequestMapping("/request-param-map")
public String requestParamMap(@RequestParam Map<String, Object> paramMap) {
    log.info("username={}, age={}", paramMap.get("username"), paramMap.get("age"));
    return "ok";
}
```
- íŒŒë¼ë¯¸í„°ë¥¼ Map, MultiValueMapìœ¼ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
  - `@RequestParam Map`
    - `Map(key=value)`
  - `@RequestParam MultiValueMap`
    - MultiValueMap(key=[value, value2, ...])
    - ex) `key=userIds, value=[id1,id2]`

íŒŒë¼ë¯¸í„°ì˜ ê°’ì´ 1ê°œê°€ í™•ì‹¤í•˜ë‹¤ë©´ `Map`ì„ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, í™•ì‹¤í•˜ì§€ ì•Šë‹¤ë©´ `MutliValueMap`ì„ ì‚¬ìš©í•˜ì.

## @ModelAttribute
ì‹¤ì œ ê°œë°œì„ í•˜ë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ì„œ í•„ìš”í•œ ê°ì²´ë¥¼ ë§Œë“¤ê³  ê·¸ ê°ì²´ì— ê°’ì„ ë„£ì–´ ì£¼ì–´ì•¼ í•œë‹¤.
ë³´í†µ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•  ê²ƒì´ë‹¤.
```java
@RequestParam String username;
@RequestParam int age;

HelloData data = new HelloData("username", age);
```
ìŠ¤í”„ë§ì€ ì´ ê³¼ì •ì„ ì™„ì „íˆ ìë™í™”í•´ì£¼ëŠ” `@ModelAttribute` ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

### HelloData.java
```java
@Data
public class HelloData {
    private String username;
    private int age;
}
```

> ğŸ€lombok @Data  
> `@Getter`, `@Setter`, `@ToString`, `@EqualsAndHashCode`, `@RequiredArgsConstructor`ë¥¼ ìë™ìœ¼ë¡œ ì ìš©í•´ì¤€ë‹¤.

### modelAttributeV1()
```java
@ResponseBody
@RequestMapping("/model-attribute-v1")
public String modelAttributeV1(@ModelAttribute HelloData helloData) {
    log.info("username={}, age={}", helloData.getUsername(),
             helloData.getAge());
    return "ok";
}
```
HelloData ê°ì²´ê°€ ìƒì„±ë˜ê³ , ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ê°’ë„ ëª¨ë‘ ë“¤ì–´ê°€ ìˆë‹¤.  
ìŠ¤í”„ë§ MVCëŠ” `@ModelAttribute`ê°€ ìˆìœ¼ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•œë‹¤.
- `HelloData` ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
- ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ì´ë¦„ìœ¼ë¡œ `HelloData` ê°ì²´ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì°¾ëŠ”ë‹¤. 
- í•´ë‹¹ í”„ë¡œí¼í‹°ì˜ `setter`ë¥¼ í˜¸ì¶œí•´ì„œ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ë°”ì¸ë”©í•œë‹¤. (ì˜ˆ: íŒŒë¼ë¯¸í„° ì´ë¦„ì´ `username`ì´ë¼ë©´, `setUsername()` ë©”ì„œë“œë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œí•˜ë©´ì„œ ê°’ì„ ë°”ì¸ë”©í•œë‹¤.)
- í”„ë¡œí¼í‹° ê°ì²´ì— `getUsername()`, `setUsername()` ë©”ì„œë“œê°€ ìˆìœ¼ë©´, ì´ ê°ì²´ëŠ” `username` ì´ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
- username í”„ë¡œí¼í‹°ì˜ ê°’ì„ ë³€ê²½í•˜ë©´ `setUsername()`ì´ í˜¸ì¶œë˜ê³ , ì¡°íšŒí•˜ë©´ `getUsername()`ì´ í˜¸ì¶œëœë‹¤.0
- model.addAttribute(helloData) ì½”ë„ í•¨ê»˜ ì ìš©ëœë‹¤.

> ğŸ€ ë°”ì¸ë”© ì˜¤ë¥˜: `age=abc` ì²˜ëŸ¼ ìˆ«ìê°€ ë“¤ì–´ê°€ì•¼í•  ê³³ì— ë¬¸ìë¥¼ ë„£ìœ¼ë©´ `BindException`ì´ ë°œìƒí•œë‹¤.

### modelAttributeV2()
```java
@ResponseBody
@RequestMapping("/model-attribute-v2")
public String modelAttributeV2(HelloData helloData) {
    log.info("username={}, age={}", helloData.getUsername(), helloData.getAge());
    return "ok";
}
```

`@ModelAttribute`ëŠ” ìƒëµí•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë° `@RequestParam`ë„ ìƒëµí•  ìˆ˜ ìˆìœ¼ë‹ˆ í˜¼ë€ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.  
ìŠ¤í”„ë§ì€ í•´ë‹¹ ìƒëµ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ê·œì¹™ì„ ì ìš©í•œë‹¤.
- `String`, `int`, `Integer` ê°™ì€ ë‹¨ìˆœ íƒ€ì… = `@RequestParam` ë‚˜ë¨¸ì§€ = `@ModelAttribute` (argument resolverë¡œ ì§€ì •í•´ë‘” íƒ€ì… ì™¸)


## HTTP ìš”ì²­ ë©”ì‹œì§€
### ë‹¨ìˆœ í…ìŠ¤íŠ¸
- HTTP message bodyì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­
  - HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©, JSON, XML, TEXT
  - ë°ì´í„° í˜•ì‹ì€ ì£¼ë¡œ JSON ì‚¬ìš©
  - POST, PUT, PATCH

ìš”ì²­ íŒŒë¼ë¯¸í„°ì™€ ë‹¤ë¥´ê²Œ HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ ë°ì´í„°ê°€ ë„˜ì–´ì˜¤ëŠ” ê²½ìš°ëŠ” `@RequestParam`, `@ModelAttribute`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. 
(ë¬¼ë¡  HTML Form í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê²½ìš°ëŠ” ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ì¸ì •ëœë‹¤.)  
HTTP ë©”ì‹œì§€ ë°”ë””ì˜ ë°ì´í„°ë¥¼ `InputStream`ì„ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì½ì„ ìˆ˜ ìˆë‹¤.

### RequestBodyStringController.java
```java
@Slf4j
@Controller
public class RequestBodyStringController {
    
    @PostMapping("/request-body-string-v1")
    public void requestBodyString(HttpServletRequest request, HttpServletResponse response) throws IOException {
        ServletInputStream inputStream = request.getInputStream();
        String messageBody = StreamUtils.copyToString(inputStream,  StandardCharsets.UTF_8);
        log.info("messageBody={}", messageBody);
        response.getWriter().write("ok");
    }
}
```

### requestBodyStringV2()
```java
@PostMapping("/request-body-string-v2")
public void requestBodyStringV2(InputStream inputStream, Writer responseWriter) throws IOException {
    String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);
    log.info("messageBody={}", messageBody);
    responseWriter.write("ok");
}
```
ìŠ¤í”„ë§ MVCëŠ” ë‹¤ìŒ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•œë‹¤.
- InputStream(Reader): HTTP ìš”ì²­ ë©”ì‹œì§€ ë°”ë””ì˜ ë‚´ìš©ì„ ì§ì ‘ ì¡°íšŒ
- OutputStream(writer): HTTP ìš”ì²­ ë©”ì‹œì§€ì˜ ë°”ë””ì— ì§ì ‘ ê²°ê³¼ ì¶œë ¥

### requestBodyStringV3()
```java
@PostMapping("/request-body-string-v3")
public HttpEntity<String> requestBodyStringV3(HttpEntity<String> httpEntity) {
    String messageBody = httpEntity.getBody();
    log.info("messageBody={}", messageBody);
    return new HttpEntity<>("ok");
}
```
ìŠ¤í”„ë§ MVCëŠ” ë‹¤ìŒ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•œë‹¤.
- HttpEntity: HTTP header, body ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ
  - ë©”ì‹œì§€ ë°”ë”” ì •ë³´ë¥¼ ì§ì ‘ ì¡°íšŒí•œë‹¤.
  - ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ê³¼ ê´€ê³„ê°€ ì—†ë‹¤. (`@RequestParam` X, `@ModelAttribute` X)
- HttpEntityëŠ” ì‘ë‹µì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
  - ë©”ì‹œì§€ ë°”ë”” ì •ë³´ ì§ì ‘ ë°˜í™˜
  - í—¤ë” ì •ë³´ í¬í•¨ ê°€ëŠ¥
  - view ì¡°íšŒ X

`HttpEntity`ë¥¼ ìƒì†ë°›ì€ ë‹¤ìŒ ê°ì²´ë“¤ë„ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
- **RequestEntity**
  - HttpMethod, url ì •ë³´ê°€ ì¶”ê°€, ìš”ì²­ì—ì„œ ì‚¬ìš©
- **ResponseEntity**
  - HTTP ìƒíƒœ ì½”ë“œ ì„¤ì • ê°€ëŠ¥
  - ì‘ë‹µì—ì„œ ì‚¬ìš©
    - `return new ResponseEntity<String>("Hello world", responseHeaders, HttpStatus.CREATED)`

> ğŸ€ ìŠ¤í”„ë§ MVC ë‚´ë¶€ì—ì„œ HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ ì½ì–´ì„œ ë¬¸ìë‚˜ ê°ì²´ë¡œ ë³€í™˜í•´ì„œ ì „ë‹¬í•´ì£¼ëŠ”ë°, ì´ë•Œ **HTTP ë©”ì‹œì§€ ì»¨ë²„í„° (HttpMessageConverter)** ë¼ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.

### requestBodyStringV4()
```java
@ResponseBody
@PostMapping("/request-body-string-v4")
public String requestBodyStringV4(@RequestBody String messageBody) {
    log.info("messageBody={}", messageBody);
    return "ok";
}
```
**@RequestBody**
- `@RequestBody`ë¥¼ ì‚¬ìš©í•˜ë©´ HTTP ë©”ì‹œì§€ ë°”ë”” ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- í—¤ë” ì •ë³´ê°€ í•„ìš”í•˜ë‹¤ë©´ `HttpEntity`ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ `@RequestHeader`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
- ë©”ì‹œì§€ ë°”ë””ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì€ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” `@RequestParam`, `@ModelAttribute` ì™€ëŠ” ì „í˜€ ê´€ê³„ê°€ ì—†ë‹¤.

## ìš”ì²­ íŒŒë¼ë¯¸í„° VS HTTP ë©”ì‹œì§€ ë°”ë””
- ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥: `@RequestParam`, `@ModelAttribute`
- HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥: `@RequestBody`


## `@ResponseBody`
`@ResponseBody`ë¥¼ ì‚¬ìš©í•˜ë©´ ì‘ë‹µ ê²°ê³¼ë¥¼ HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ë‹´ì•„ì„œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
ë¬¼ë¡  ì´ ê²½ìš°ì—ë„ viewë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

### RequestBodyJsonController.java
```java
@Slf4j
@Controller
public class RequestBodyJsonController {
    
    private ObjectMapper objectMapper = new ObjectMapper();
    
    @PostMapping("/request-body-json-v1")
    public void requestBodyJsonV1(HttpServletRequest request, HttpServletResponse response) throws IOException {
        
        ServletInputStream inputStream = request.getInputStream();
        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);
        
        log.info("messageBody={}", messageBody);
        HelloData data = objectMapper.readValue(messageBody, HelloData.class);
        log.info("username={}, age={}", data.getUsername(), data.getAge());
        
        response.getWriter().write("ok");
    }
}
```
- HttpServletRequestë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ HTTP ë©”ì‹œì§€ ë°”ë””ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì™€ì„œ, ë¬¸ìë¡œ ë°˜í™˜í•œë‹¤.
- ë¬¸ìë¡œ ëœ JSON ë°ì´í„°ë¥¼ Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ `objectMapper`ë¥¼ ì‚¬ìš©í•´ì„œ ìë°” ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
- ì‹¤í–‰ ê²°ê³¼
  ```text
  {"username":"hello", "age":20}
  content-type: application/json
  ```
  
### requestBodyJsonV2()
```java
@ResponseBody
@PostMapping("/request-body-json-v2")
public String requestBodyJsonV2(@RequestBody String messageBody) throws IOException {
    HelloData data = objectMapper.readValue(messageBody, HelloData.class);
    log.info("username={}, age={}", data.getUsername(), data.getAge());
    return "ok";
}
```
- ì´ì „ì— í•™ìŠµí–ˆë˜ `@RequestBody`ë¥¼ ì‚¬ìš©í•´ì„œ HTTP ë©”ì‹œì§€ì—ì„œ ë°ì´í„°ë¥¼ êº¼ë‚´ê³  messageBodyì— ì €ì¥í•œë‹¤.
- ë¬¸ìë¡œ ëœ JSON ë°ì´í„°ì¸ `messageBody`ë¥¼ `objectMapper`ë¥¼ í†µí•´ì„œ ìë°” ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
- HttpMessageConverter ì‚¬ìš© â¡ï¸ StringHttpMessageConverter ì ìš©
- **ë¬¸ìë¡œ ë³€í™˜í•˜ê³  ë‹¤ì‹œ josnìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ ë¶ˆí¸í•œë‹¤.**

### requestBodyJsonV3()
```java
@ResponseBody
@PostMapping("/request-body-json-v3")
public String requestBodyJsonV3(@RequestBody HelloData data) {
    log.info("username={}, age={}", data.getUsername(), data.getAge());
    return "ok";
}
```
**@RequestBody ê°ì²´ íŒŒë¼ë¯¸í„°**
- `@RequestBody HelloData data`
- `@RequestBody`ì— ì§ì ‘ ë§Œë“  ê°ì²´ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
- HttpMessageConverterì‚¬ìš© â¡ï¸ MappingJackson2HttpMessageConverter (content-type: application/json)
`HttpEntity`, `@RequestBody`ë¥¼ ì‚¬ìš©í•˜ë©´ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ HTTP ë©”ì‹œì§€ ë°”ë””ì˜ ë‚´ìš©ì„ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë¬¸ìë‚˜ ê°ì²´ ë“±ìœ¼ë¡œ ë³€í™˜í•´ ì¤€ë‹¤.  
HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” ë¬¸ì ë¿ë§Œ ì•„ë‹ˆë¼ JSONë„ ê°ì²´ë¡œ ë³€í™˜í•´ ì£¼ëŠ”ë°, V2ì—ì„œ í–ˆë˜ ì‘ì—…ì„ ì§ì ‘ ì²˜ë¦¬í•´ì¤€ë‹¤.
- ìƒëµ ë¶ˆê°€
  - ì´ ê²½ìš°ì— HelloData ì— `@RequestBody`ë¥¼ ìƒëµí•˜ë©´, `@ModelAttribute`ê°€ ì ìš©ëœë‹¤.
  - ì¦‰, HTTP ë©”ì‹œì§€ ë°”ë””ê°€ ì•„ë‹ˆë¼ ìµ¸ì–´ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.

> ğŸš¨ HTTP ìš”ì²­ ì‹œì— content-typeì´ application/json ì¸ì§€ ê¼­! í™•ì¸í•´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ JSONì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ì‹¤í–‰ëœë‹¤.

### requestBodyJsonV4()
```java
@ResponseBody
@PostMapping("/request-body-json-v4")
public String requestBodyJsonV4(HttpEntity<HelloData> httpEntity) {
    HelloData data = httpEntity.getBody();
    log.info("username={}, age={}", data.getUsername(), data.getAge());
    return "ok";
}
```

### requestBodyJsonV5()
```java
@ResponseBody
@PostMapping("/request-body-json-v5")
public HelloData requestBodyJsonV5(@RequestBody HelloData data) {
    log.info("username={}, age={}", data.getUsername(), data.getAge());
    return data;
}
```
**@ResponseBody**
- ì‘ë‹µì˜ ê²½ìš°ì—ë„ `@ResponseBody`ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ê°ì²´ë¥¼ HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤. ë¬¼ë¡  ì´ ê²½ìš°ì—ë„ `HttpEntity`ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.
- `@RequestBody` ìš”ì²­
  - JSON ìš”ì²­ â¡ï¸ HTTP ë©”ì‹œì§€ â¡ï¸ ì»¨ë²„í„° ê°ì²´
- `@ResponseBody` ì‘ë‹µ
  - ê°ì²´ â¡ï¸ HTTP ë©”ì‹œì§€ ì»¨ë²„í„° â¡ï¸ JSON ì‘ë‹µ