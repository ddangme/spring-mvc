## í”„ë¡œì íŠ¸ ìƒì„±
```text
Project: Gradle Project
Language: Java
Spring Boot: 2.4.x
Packaging: Jar
Java: 11
Dependencies: Spring Web, Thymeleaf, Lombok
```
### build.gradle
```text
plugins {
    id 'org.springframework.boot' version '2.4.3'
    id 'io.spring.dependency-management' version '1.0.11.RELEASE'
    id 'java'
}

group = 'hello'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

configurations {
    compileOnly {
    	extendsFrom annotationProcessor
    }
}

repositories {
	mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

test {
	useJUnitPlatform()
}
```


## ë¡œê¹… ê°„ë‹¨íˆ ì•Œì•„ë³´ê¸°
ìš´ì˜ ì‹œìŠ¤í…œì—ì„œëŠ” `System.out.println()` ê°™ì€ ì‹œìŠ¤í…œ ì½˜ì†”ì„ ì‚¬ìš©í•´ì„œ ì¶œë ¥í•˜ì§€ ì•Šê³ , ë³„ë„ì˜ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤.

### ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬
ìŠ¤í”„ë§ ë¶€íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬(`spring-boot-starter-logging`)ê°€ í•¨ê»˜ í¬í•¨ëœë‹¤.  
ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê¸°ë³¸ìœ¼ë¡œ ë‹¤ìŒ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.
- [SLF4J](http://www.slf4j.org)
- [Logback](http://logback.qos.ch)

ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Logback. Log4J, Log4J2 ë“±ë“± ìˆ˜ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆëŠ”ë°, ê·¸ê²ƒì„ í†µí•©í•´ì„œ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ëŠ” ê²ƒì´ ë°”ë¡œ `SLF4J` ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ SLF4JëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê³ , ê·¸ êµ¬í˜„ì²´ë¡œ Logback ê°™ì€ ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒí•˜ë©´ ëœë‹¤. 
ì‹¤ë¬´ì—ì„œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” Logbackì„ ëŒ€ë¶€ë¶„ ì‚¬ìš©í•œë‹¤.

> ğŸš¨ ì‹¤ë¬´ì—ì„œëŠ” í•­ìƒ ë¡œê·¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

### ë¡œê·¸ ì„ ì–¸
- `private Logger log = LoggerFactory.getLogger(getClass())`
- `private static final Logger log = LoggerFactory.getLogger(xxx.class)`
- `@Slf4j`: ë¡¬ë³µ ì‚¬ìš© ê°€ëŠ¥
### ë¡œê·¸ í˜¸ì¶œ
- `log.info("hello")`
- `System.out.prinfln("hello")` ì‹œìŠ¤í…œ ì½˜ì†”ë¡œ ì§ì ‘ ì¶œë ¥í•˜ëŠ” ê²ƒ ë³´ë‹¤ ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì´ ìˆë‹¤.

#### LogTestController
```java
@RestController
public class LogTestController {
    
    private final Logger log = LoggerFactory.getLogger(getClass());
    
    @RequestMapping("/log-test")
    public String logTest() {
        String name = "Spring";
        
        log.trace("trace log={}", name);
        log.debug("debug log={}", name);
        log.info(" info log={}", name);
        log.warn(" warn log={}", name);
        log.error("error log={}", name);
        
        //ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ a+b ê³„ì‚° ë¡œì§ì´ ë¨¼ì € ì‹¤í–‰ë¨, ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ X
        log.debug("String concat log=" + name);
        return "ok";
    }
}
```

##### ë§¤í•‘ ì •ë³´ `@RestController`
- `@Controller`ëŠ” ë°˜í™˜ ê°’ì´ Stringì´ë©´ ë·° ì´ë¦„ìœ¼ë¡œ ì¸ì‹ë˜ì–´ ë·°ë¥¼ ì°¾ê³  ë·°ê°€ ë Œë”ë§ëœë‹¤.
- `@RestController`ëŠ” ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹Œ, **HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥**í•œë‹¤. ë”°ë¼ì„œ ìœ„ì˜ ì½”ë“œëŠ” ì‹¤í–‰ ê²°ê³¼ë¡œ ok ë©”ì‹œì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.

##### í…ŒìŠ¤íŠ¸
- **ì‹œê°„, ë¡œê·¸ ë ˆë²¨, í”„ë¡œì„¸ìŠ¤ ID, ì“°ë ˆë“œ ëª…, í´ë˜ìŠ¤ëª…, ë¡œê·¸ ë©”ì‹œì§€**ê°€ ì¶œë ¥ëœë‹¤.
-  Level: TRACE > DEBUG > INFO > WARN > ERROR
  - ê°œë°œ ì„œë²„ëŠ” debug ì¶œë ¥, ìš´ì˜ ì„œë²„ëŠ” info ì¶œë ¥
  - 
### ë¡œê·¸ ë ˆë²¨ ì„¤ì •
`application.properties`
```properties
#ì „ì²´ ë¡œê·¸ ë ˆë²¨ ì„¤ì •(ê¸°ë³¸ info)
logging.level.root=info

#hello.springmvc íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ ë¡œê·¸ ë ˆë²¨ ì„¤ì •
logging.level.hello.springmvc=debug
```

### ì˜¬ë°”ë¥¸ ë¡œê·¸ ì‚¬ìš©ë²•
- `log.debug("data="+data)` ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ infoë¡œ ì„¤ì •í•´ë„ í•´ë‹¹ ì½”ë“œì— ìˆëŠ” "data="+dataê°€ ì‹¤ì œ ì‹¤í–‰ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ë¬¸ì ë”í•˜ê¸° ì—°ì‚°ì´ ë°œìƒí•œë‹¤.
- `log.debug("data={}, data)` ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ infoë¡œ ì„¤ì •í•˜ë©´ ì•„ë¬´ì¼ë„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì•ê³¼ ê°™ì€ ì˜ë¯¸ì—†ëŠ” ì—°ì‚°ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

### ë¡œê·¸ ì‚¬ìš© ì‹œ ì¥ì 
- ì“°ë ˆë“œ ì •ë³´, í´ë˜ìŠ¤ ì´ë¦„ ê°™ì€ ë¶€ê°€ ì •ë³´ë¥¼ í•¨ê²Œ ë³¼ ìˆ˜ ìˆê³ , ì¶œë ¥ ëª¨ì–‘ì„ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ ë ˆë²¨ì— ë”°ë¼ ê°œë°œ ì„œë²„ì—ì„œëŠ” ëª¨ë“  ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ê³ , ìš´ì˜ì„œë²„ì—ì„œëŠ” ì¶œë ¥í•˜ì§€ ì•ŠëŠ” ë“± ë¡œê·¸ë¥¼ ìƒí™©ì— ë§ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.
- ì‹œìŠ¤í…œ ì•„ì›ƒ ì½˜ì†”ì—ë§Œ ì¶œë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, íŒŒì¼ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ë“±, ë¡œê·¸ë¥¼ ë³„ë„ì˜ ìœ„ì¹˜ë¡œ ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤.
íŠ¹íˆ íŒŒì¼ë¡œ ë‚¨ê¸¸ ë•ŒëŠ” ì¼ë³„, íŠ¹ì • ìš©ëŸ‰ì— ë”°ë¼ ë¡œê·¸ë¥¼ ë¶„í• í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
- ì„±ëŠ¥ë„ ì¼ë°˜ System.outë³´ë‹¤ ì¢‹ë‹¤. (ë‚´ë¶€ ë²„í¼ë§, ë©€í‹° ì“°ë ˆë“œ ë“±ë“±)

## ìš”ì²­ ë§¤í•‘
### MappingController
```java
@RestController
public class MappingController {
    private Logger log = LoggerFactory.getLogger(getClass());

    @RequestMapping("/hello-basic")
    public String helloBasic() {
        log.info("helloBasic");
        return "ok";
    }
}
```
- `@RequestMapping("/hello-basic")`
  - `/hello-basic` URL í˜¸ì¶œì´ ì˜¤ë©´ ì´ ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ë„ë¡ ë§¤í•‘í•œë‹¤.
  - ëŒ€ë¶€ë¶„ì˜ ì†ì„±ì„ ë°°ì—´ë¡œ ì œê³µí•˜ë¯€ë¡œ **ë‹¤ì¤‘ ì„¤ì •ì´ ê°€ëŠ¥**í•˜ë‹¤. {"/hello-basic", "/hello-go"}

> ğŸ€ `/hello-basic`, `/hello-basic/` ë‘ ìš”ì²­ì€ ë‹¤ë¥¸ URLì´ì§€ë§Œ, ìŠ¤í”„ë§ì€ ê°™ì€ ìš”ì²­ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.

### HTTP ë©”ì„œë“œ
- `@RequestMapping` ì— method ì†ì„±ìœ¼ë¡œ HTTP ë©”ì„œë“œë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ HTTP ë©”ì„œë“œì™€ ë¬´ê´€í•˜ê²Œ í˜¸ì¶œëœë‹¤.
  (GET, HEAD, POST, PUT, PATCH, DELETE ëª¨ë‘ í—ˆìš©)

### HTTP ë©”ì„œë“œ ë§¤í•‘
```java
    @RequestMapping(value = "/mapping-get-v1", method = RequestMethod.GET)
    public String mappingGetV1() {
        log.info("mappingGetV1");
        return "ok";
    }
```
- ë§Œì•½, í•´ë‹¹ ê²½ë¡œì— POST ë§¤í•‘ì„ ìš”ì²­í•˜ë©´ ìŠ¤í”„ë§ MVCëŠ” 405 ìƒíƒœì½”ë“œ(Method Not Allowed)ë¥¼ ë°˜í™˜í•œë‹¤.

### HTTP ë©”ì„œë“œ ì¶•ì•½
```java
@GetMapping(value = "/mapping-get-v2")
public String mappingGetV2() {
	log.info("mapping-get-v2");
    return "ok";
}
```
- í¸ë¦¬í•œ ì¶•ì•½ ì• ë…¸í…Œì´ì…˜
  - @GetMapping
  - @PostMapping
  - @PutMapping
  - @DeleteMapping
  - @PatchMapping
- HTTP ë©”ì„œë“œë¥¼ ì¶•ì•½í•œ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì§ê´€ì ì´ë‹¤.
ì½”ë“œë¥¼ ë³´ë©´ ë‚´ë¶€ì—ì„œ `@RequestMapping` ê³¼ `method` ë¥¼ ì§€ì •í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### PathVariable(ê²½ë¡œ ë³€ìˆ˜) ì‚¬ìš©
```java
@GetMapping("/mapping/{userId}")
public String mappingPath(@PathVariable("userId") String data) {
    log.info("mappingPath userId={}", data);
    return "ok";
}
```
- ìµœê·¼ HTTP APIëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë¦¬ì†ŒìŠ¤ ê²½ë¡œì— ì‹ë³„ìë¥¼ ë„£ëŠ” ìŠ¤íƒ€ì¼ì„ ì„ í˜¸í•œë‹¤.
  - `/mapping/userA`
  - `/users/1`
- `@RequestMapping` ì€ URL ê²½ë¡œë¥¼ í…œí”Œë¦¿í™” í•  ìˆ˜ ìˆëŠ”ë°, `@PathVariable` ì„ ì‚¬ìš©í•˜ë©´ ë§¤ì¹­ ë˜ëŠ” ë¶€ë¶„ì„ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- @PathVariable ì˜ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ê°™ìœ¼ë©´ ìƒëµí•  ìˆ˜ ìˆë‹¤. (ì˜ˆ: @PathVariable("userId") String userId -> @PathVariable userId)

### PathVariable ë‹¤ì¤‘ ì‚¬ìš©
```java
@GetMapping("/mapping/users/{userId}/orders/{orderId}")
public String mappingPath(@PathVariable String userId, @PathVariable Long orderId) {
    log.info("mappingPath userId={}, orderId={}", userId, orderId);
    return "ok";
}
```

### íŠ¹ì • íŒŒë¼ë¯¸í„° ì¡°ê±´ ë§¤í•‘
```java
@GetMapping(value = "/mapping-param", params = "mode=debug")
public String mappingParam() {
    log.info("mappingParam");
    return "ok";
}
```
- íŠ¹ì • íŒŒë¼ë¯¸í„°ê°€ ìˆê±°ë‚˜ ì—†ëŠ” ì¡°ê±´ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ì˜ ì‚¬ìš©í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.
- íŒŒë¼ë¯¸í„°ë¡œ ì¶”ê°€ ë§¤í•‘
  - params="mode",
  - params="!mode"
  - params="mode=debug"
  - params="mode!=debug" (! = )
  - params = {"mode=debug","data=good"}
### íŠ¹ì • í—¤ë” ì¡°ê±´ ë§¤í•‘
```java
@GetMapping(value = "/mapping-header", headers = "mode=debug")
public String mappingHeader() {
    log.info("mappingHeader");
    return "ok";
}
```
- íŒŒë¼ë¯¸í„° ë§¤í•‘ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, HTTP í—¤ë”ë¥¼ ì‚¬ìš©í•œë‹¤.
- íŠ¹ì • í—¤ë”ë¡œ ì¶”ê°€ ë§¤í•‘
  - headers="mode",
  - headers="!mode"
  - headers="mode=debug"
  - headers="mode!=debug" (! = )
### ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘ - HTTP ìš”ì²­ Content-Type, consume
```java
@PostMapping(value = "/mapping-consume", consumes = "application/json")
public String mappingConsumes() {
    log.info("mappingConsumes");
    return "ok";
}
```
- HTTP ìš”ì²­ì˜ Content-Type í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤. 
- ë§Œì•½ ë§ì§€ ì•Šìœ¼ë©´ HTTP 415 ìƒíƒœì½”ë“œ(Unsupported Media Type)ì„ ë°˜í™˜í•œë‹¤.
- Content-Type í—¤ë” ê¸°ë°˜ ì¶”ê°€ ë§¤í•‘ Media Type
  - consumes="application/json"
  - consumes="!application/json"
  - consumes="application/*"
  - consumes="*\/*"
  - MediaType.APPLICATION_JSON_VALUE
- ì˜ˆ) 
    ```text
    consumes = "text/plain"
    consumes = {"text/plain", "application/*"}
    consumes = MediaType.TEXT_PLAIN_VALUE
    ```

### ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘ - HTTP ìš”ì²­ Accept, produce
```java
@PostMapping(value = "/mapping-produce", produces = "text/html")
public String mappingProduces() {
    log.info("mappingProduces");
    return "ok";
}
```
- HTTP ìš”ì²­ì˜ Accept í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤. 
- ë§Œì•½ ë§ì§€ ì•Šìœ¼ë©´ HTTP 406 ìƒíƒœì½”ë“œ(Not Acceptable)ì„ ë°˜í™˜í•œë‹¤.
- Accept í—¤ë” ê¸°ë°˜ Media Type
  - produces = "text/html"
  - produces = "!text/html"
  - produces = "text/*"
  - produces = "*\/*"
- ì˜ˆ)
    ```text
    produces = "text/plain"
    produces = {"text/plain", "application/*"}
    produces = MediaType.TEXT_PLAIN_VALUE
    produces = "text/plain;charset=UTF-8"
    ```
### API ì˜ˆì‹œ
íšŒì› ê´€ë¦¬ë¥¼ HTTP APIë¡œ ë§Œë“ ë‹¤ ìƒê°í•˜ê³  ë§¤í•‘ì„ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ì•Œì•„ë³´ì. (ì‹¤ì œ ë°ì´í„°ê°€ ë„˜ì–´ê°€ëŠ” ë¶€ë¶„ì€ ìƒëµí•˜ê³  URL ë§¤í•‘ë§Œ)
- íšŒì› ëª©ë¡ ì¡°íšŒ: GET `/users`
- íšŒì› ë“±ë¡: POST `/users`
- íšŒì› ì¡°íšŒ: GET `/users/{userId}`
- íšŒì› ìˆ˜ì •: PATCH `/users/{userId}`
- íšŒì› ì‚­ì œ: DELETE `/users/{userId}`
```java
@RestController
@RequestMapping("/mapping/users")
public class MappingClassController {
    
    @GetMapping
    public String users() {
        return "get users";
    }
    
    @PostMapping
    public String addUser() {
        return "post user";
    }
    
    @GetMapping("/{userId}")
    public String findUser(@PathVariable String userId) {
        return "get userId=" + userId;
    }
    
    @PatchMapping("/{userId}")
    public String updateUser(@PathVariable String userId) {
        return "update userId=" + userId;
    }
    
    @DeleteMapping("/{userId}")
    public String deleteUser(@PathVariable String userId) {
        return "delete userId=" + userId;
    }
}
```
- `@RequestMapping("/mapping/users")` í´ë˜ìŠ¤ ë ˆë²¨ì— ë§¤í•‘ ì •ë³´ë¥¼ ë‘ë©´ ë©”ì„œë“œ ë ˆë²¨ì—ì„œ í•´ë‹¹ ì •ë³´ë¥¼ ì¡°í•©í•´ì„œ ì‚¬ìš©í•œë‹¤.

